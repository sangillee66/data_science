<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="이상일(서울대학교 지리교육과)">

<title>웹 앱 개발: Shiny의 기초 – Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-9e227471bb36b425561843ed1c2ca3ae.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-1d1e30c4ff39a421c5d0be39657e8b6a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-9e227471bb36b425561843ed1c2ca3ae.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">웹 앱 개발: Shiny의 기초</h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="검색" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Science</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="다크 모드 전환"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="검색"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">웹사이트 소개</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">R과 데이터사이언스</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R과 RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R과 데이터사이언스 과정</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">소통하기: Quarto로 대시보드 만들기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">불러오기와 정돈하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">변형하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">시각화하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">탐색하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">수집하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">소통하기: 인터랙티브 시각화</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">소통하기: 지리공간적 시각화</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exec_11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">웹 앱 개발: Shiny의 기초</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">R 프레젠테이션: 2025/2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_01_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 1</span> | <span style="font-size:1em">R과 RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_02_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 2</span> | <span style="font-size:1em">R과 데이터사이언스</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_03_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 3</span> | <span style="font-size:1em">소통하기: Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_04_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 4</span> | <span style="font-size:1em">데이터 불러오기와 정돈하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_05_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 5</span> | <span style="font-size:1em">데이터 변형하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_06_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 6</span> | <span style="font-size:1em">데이터 시각화하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_07_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 7</span> | <span style="font-size:1em">데이터 탐색하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_08_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 8</span> | <span style="font-size:1em">데이터 수집하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_09_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 9</span> | <span style="font-size:1em">웹 앱 개발: 인터랙티브 시각화</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_10_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 10</span> | <span style="font-size:1em">웹 앱 개발: 심화</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_11_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 11</span> | <span style="font-size:1em">웹 앱 개발: Shiny 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_12_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">| <span style="color:coral;font-size:0.6em">R Lecture 12</span> | <span style="font-size:1em">웹 앱 개발: Shiny 2</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">R 프레젠테이션: 2024/1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R &amp; RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R &amp; Data Science</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Import and Tidying</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Transformation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Exploration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Collection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Communication with Data: Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Communication with Data: Dashboards</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_lec_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">R 실습: 2025/2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_01_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R and RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_02_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R과 데이터사이언스 과정</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_03_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">소통하기: Quarto로 대시보드 만들기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_04_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">데이터 불러오기와 정돈하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_05_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">데이터 변형하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_06_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">시각화하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_07_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">데이터 사이언스의 과정 복습하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_08_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">데이터 수집하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_09_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">소통하기: 인터랙티브 시각화</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_10_2025.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">소통하기: 지리공간적 시각화</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">R 실습: 2024/1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab01: R과 RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab02: R과 데이터사이언스</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab03: 데이터 불러오기와 정리하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab04: 데이터 변형하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab05: 데이터 시각화하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab06: 데이터 탐색하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab07: 데이터 수집하기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab08: 데이터로 소통하기: Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab09: 데이터로 소통하기: 대시보드 만들기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab10: 데이터로 소통하기: 동적, 반응형 시각화</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">목차</h2>
   
  <ul>
  <li><a href="#개요" id="toc-개요" class="nav-link active" data-scroll-target="#개요">개요</a></li>
  <li><a href="#기본-동작" id="toc-기본-동작" class="nav-link" data-scroll-target="#기본-동작"><span class="header-section-number">1</span> 기본 동작</a>
  <ul class="collapse">
  <li><a href="#기본-구조" id="toc-기본-구조" class="nav-link" data-scroll-target="#기본-구조"><span class="header-section-number">1.1</span> 기본 구조</a></li>
  <li><a href="#shiny-프로젝트의-생성" id="toc-shiny-프로젝트의-생성" class="nav-link" data-scroll-target="#shiny-프로젝트의-생성"><span class="header-section-number">1.2</span> Shiny 프로젝트의 생성</a></li>
  <li><a href="#웹-앱의-생성" id="toc-웹-앱의-생성" class="nav-link" data-scroll-target="#웹-앱의-생성"><span class="header-section-number">1.3</span> 웹 앱의 생성</a></li>
  </ul></li>
  <li><a href="#shiny의-기본-문법-체계" id="toc-shiny의-기본-문법-체계" class="nav-link" data-scroll-target="#shiny의-기본-문법-체계"><span class="header-section-number">2</span> Shiny의 기본 문법 체계</a>
  <ul class="collapse">
  <li><a href="#ui-부분" id="toc-ui-부분" class="nav-link" data-scroll-target="#ui-부분"><span class="header-section-number">2.1</span> UI 부분</a></li>
  <li><a href="#server-부분" id="toc-server-부분" class="nav-link" data-scroll-target="#server-부분"><span class="header-section-number">2.2</span> Server 부분</a></li>
  <li><a href="#결합-및-실행-부분" id="toc-결합-및-실행-부분" class="nav-link" data-scroll-target="#결합-및-실행-부분"><span class="header-section-number">2.3</span> 결합 및 실행 부분</a></li>
  </ul></li>
  <li><a href="#입력-함수와-출력-함수의-종류" id="toc-입력-함수와-출력-함수의-종류" class="nav-link" data-scroll-target="#입력-함수와-출력-함수의-종류"><span class="header-section-number">3</span> 입력 함수와 출력 함수의 종류</a>
  <ul class="collapse">
  <li><a href="#입력-함수" id="toc-입력-함수" class="nav-link" data-scroll-target="#입력-함수"><span class="header-section-number">3.1</span> 입력 함수</a></li>
  <li><a href="#출력-함수와-렌더링-함수" id="toc-출력-함수와-렌더링-함수" class="nav-link" data-scroll-target="#출력-함수와-렌더링-함수"><span class="header-section-number">3.2</span> 출력 함수와 렌더링 함수</a></li>
  </ul></li>
  <li><a href="#bslib-패키지를-활용한-현대적-ui-구조-디자인" id="toc-bslib-패키지를-활용한-현대적-ui-구조-디자인" class="nav-link" data-scroll-target="#bslib-패키지를-활용한-현대적-ui-구조-디자인"><span class="header-section-number">4</span> <strong>bslib</strong> 패키지를 활용한 현대적 UI 구조 디자인</a>
  <ul class="collapse">
  <li><a href="#개요-1" id="toc-개요-1" class="nav-link" data-scroll-target="#개요-1"><span class="header-section-number">4.1</span> 개요</a></li>
  <li><a href="#ui-컨테이너-함수" id="toc-ui-컨테이너-함수" class="nav-link" data-scroll-target="#ui-컨테이너-함수"><span class="header-section-number">4.2</span> UI 컨테이너 함수</a></li>
  <li><a href="#ui-컴포넌트-콘텐츠-구성요소" id="toc-ui-컴포넌트-콘텐츠-구성요소" class="nav-link" data-scroll-target="#ui-컴포넌트-콘텐츠-구성요소"><span class="header-section-number">4.3</span> UI 컴포넌트: 콘텐츠 구성요소</a></li>
  <li><a href="#사용자-정의-테마" id="toc-사용자-정의-테마" class="nav-link" data-scroll-target="#사용자-정의-테마"><span class="header-section-number">4.4</span> 사용자 정의 테마</a></li>
  </ul></li>
  <li><a href="#반응성-함수" id="toc-반응성-함수" class="nav-link" data-scroll-target="#반응성-함수"><span class="header-section-number">5</span> 반응성 함수</a>
  <ul class="collapse">
  <li><a href="#정의" id="toc-정의" class="nav-link" data-scroll-target="#정의"><span class="header-section-number">5.1</span> 정의</a></li>
  <li><a href="#종류" id="toc-종류" class="nav-link" data-scroll-target="#종류"><span class="header-section-number">5.2</span> 종류</a></li>
  </ul></li>
  <li><a href="#웹-앱의-공유" id="toc-웹-앱의-공유" class="nav-link" data-scroll-target="#웹-앱의-공유"><span class="header-section-number">6</span> 웹 앱의 공유</a>
  <ul class="collapse">
  <li><a href="#웹-앱-배포deployment" id="toc-웹-앱-배포deployment" class="nav-link" data-scroll-target="#웹-앱-배포deployment"><span class="header-section-number">6.1</span> 웹 앱 배포(deployment)</a></li>
  </ul></li>
  <li><a href="#quarto와-shiny의-결합" id="toc-quarto와-shiny의-결합" class="nav-link" data-scroll-target="#quarto와-shiny의-결합"><span class="header-section-number">7</span> Quarto와 Shiny의 결합</a>
  <ul class="collapse">
  <li><a href="#shiny-중심-방식" id="toc-shiny-중심-방식" class="nav-link" data-scroll-target="#shiny-중심-방식"><span class="header-section-number">7.1</span> Shiny 중심 방식</a></li>
  <li><a href="#quarto-중심-방식" id="toc-quarto-중심-방식" class="nav-link" data-scroll-target="#quarto-중심-방식"><span class="header-section-number">7.2</span> Quarto 중심 방식</a></li>
  </ul></li>
  <li><a href="#llm과-웹-앱의-결합" id="toc-llm과-웹-앱의-결합" class="nav-link" data-scroll-target="#llm과-웹-앱의-결합"><span class="header-section-number">8</span> LLM과 웹 앱의 결합</a>
  <ul class="collapse">
  <li><a href="#챗봇-만들기" id="toc-챗봇-만들기" class="nav-link" data-scroll-target="#챗봇-만들기"><span class="header-section-number">8.1</span> 챗봇 만들기</a></li>
  <li><a href="#게시판-만들기" id="toc-게시판-만들기" class="nav-link" data-scroll-target="#게시판-만들기"><span class="header-section-number">8.2</span> 게시판 만들기</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/sangillee66/data_science/issues/new" class="toc-action"><i class="bi bi-github"></i>이슈 보고</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">웹 앱 개발: Shiny의 기초</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">저자</div>
    <div class="quarto-title-meta-contents">
             <p>이상일(서울대학교 지리교육과) </p>
          </div>
  </div>
    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">2026년 1월 16일</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="개요" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="개요">개요</h2>
<p>여기서는 웹 앱 개발 도구로서의 <a href="https://shiny.posit.co/"><strong>Shiny</strong></a>에 대해 배운다. <a href="https://shiny.posit.co/"><strong>Shiny</strong></a>는 서버-기반의 웹 앱을 개발하기 위한 프레임워크를 제공한다. 원래 <a href="https://rstudio.github.io/shiny/">R 패키지</a>로 개발되었으나 이제는 R과 Python 모두를 위한 웹 앱 개발 도구로 발전하고 있다.</p>
<ul>
<li><p><a href="https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/">Shiny for R</a></p></li>
<li><p><a href="https://shiny.posit.co/py/">Shiny for Python</a></p></li>
</ul>
<p>Shiny를 배우기 위한 다양한 리소스가 존재한다. 가장 중요한 리소스는 <a href="https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/">Shiny for R</a> 홈페이지이다. Get Started를 살펴본 후 Gallery의 다양한 예제를 살펴보는 것으로 시작하는 것이 좋다. 이 홈페이지의 내용만으로도 Shiny의 기본 구조와 문법을 익히기에 충분하다.</p>
<p>좀 더 종합적으로 Shiny을 이해하려면 다음의 웹 북을 활용할 수 있다. 첫 번째가 바이블이라고 할 수 있다.</p>
<ul>
<li><p><a href="https://mastering-shiny.org/"><em>Mastering Shiny</em></a> by <a href="https://hadley.nz/">Hadley Wickham</a></p></li>
<li><p><a href="https://unleash-shiny.rinterface.com/"><em>Outstanding User Interfaces with Shiny</em></a></p></li>
<li><p><a href="https://engineering-shiny.org/"><em>Engineering Production-Grade Shiny Apps</em></a></p></li>
<li><p><a href="https://plotly-r.com/"><em>Interactive Web-Based Data Visualization with R, plotly, and shiny</em></a></p></li>
<li><p><a href="https://bookdown.org/loankimrobinson/rshinybook/"><em>R Shiny Applications in Finance, Medicine Pharama and Education Industry</em></a></p></li>
<li><p><a href="https://bookdown.org/hneth/i2ds/shiny.html"><em>Introduction to Data Science</em>: 25 Shiny Applications</a></p></li>
<li><p><a href="https://greendaygh.github.io/Rprog2021/shiny.html">데이터 사이언스를 위한 R 프로그래밍: 14 shiny</a></p></li>
</ul>
</section>
<section id="기본-동작" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="기본-동작"><span class="header-section-number">1</span> 기본 동작</h2>
<section id="기본-구조" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="기본-구조"><span class="header-section-number">1.1</span> 기본 구조</h3>
<p>Shiny는 크게 세 부분으로 나뉘어 진다(<a href="#fig-structure" class="quarto-xref">그림&nbsp;1</a>).</p>
<p>첫째, <strong>UI</strong>(혹은 UX) 부분이다. 프론트엔트(front-end) 부분으로 <strong>입력을 받고</strong>, Server에서 산출된 <strong>출력을 표출</strong>하는 부분이다.</p>
<p>둘째, <strong>Server</strong> 부분이다. 백엔드(back-end) 부분으로 UI에서 받은 입력에 바탕으로 <strong>출력을 산출</strong>하는 부분이다.</p>
<p>셋째, <strong>결합 및 실행</strong> 부분이다. UI와 Server 부분을 결합해 웹 앱을 실행하는 부분이다. 결합 및 실행은 단일 파일 속에 UI와 Server를 함께 다루는 방식과, 두 개의 파일로 분할하여 다루는 방식으로 나뉜다. 여기서는 전자를 중심으로 설명한다.</p>
<div id="fig-structure" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://bookdown.org/hneth/i2ds/images/Shiny_ui_server.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="그림&nbsp;1: Shiny의 구조(https://bookdown.org/hneth/i2ds/shiny.html)"><img src="https://bookdown.org/hneth/i2ds/images/Shiny_ui_server.png" title="Shiny의 구조" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;1: Shiny의 구조(<a href="https://bookdown.org/hneth/i2ds/shiny.html" class="uri">https://bookdown.org/hneth/i2ds/shiny.html</a>)
</figcaption>
</figure>
</div>
</section>
<section id="shiny-프로젝트의-생성" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="shiny-프로젝트의-생성"><span class="header-section-number">1.2</span> Shiny 프로젝트의 생성</h3>
<p>여기서는 RStudio에서 Shiny 프로젝트를 생성하는 방법에 대해 배운다. New Project &gt; New Directory &gt; Shiny Application을 선택한다. <a href="#fig-create" class="quarto-xref">그림&nbsp;2</a> 에서 Directory name과 Subdirectory의 위치를 설정한다.</p>
<div id="fig-create" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-create-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/clipboard-1356184653.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="그림&nbsp;2: Shiny 프로젝트의 생성"><img src="images/clipboard-1356184653.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-create-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2: Shiny 프로젝트의 생성
</figcaption>
</figure>
</div>
<p>이렇게 하면 Shiny 프로젝트가 생성되고, 자동적으로 app.R이라는 스크립트 파일이 생성된다.</p>
</section>
<section id="웹-앱의-생성" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="웹-앱의-생성"><span class="header-section-number">1.3</span> 웹 앱의 생성</h3>
<p>app.R에서 스크립트 윈도우 오른쪽 상단에 위치한 Run App 버튼을 클릭하면 <a href="#fig-first" class="quarto-xref">그림&nbsp;3</a> 과 같은 웹 앱이 새로운 윈도우에 생성된다. 왼편의 슬라이더를 움직이면 오른편의 히스토그램이 변한다는 점을 확인한다. 즉 빈(bin)의 개수를 달리하면서 데이터 분포를 탐색해보기 위한 단순한 웹 앱이 만들어진 것이다.</p>
<div id="fig-first" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-first-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/clipboard-295121675.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="그림&nbsp;3: 단순한 웹 앱 예시"><img src="images/clipboard-295121675.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-first-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;3: 단순한 웹 앱 예시
</figcaption>
</figure>
</div>
<p>이 단순한 웹 앱을 살펴본다. 다음과 같은 점을 확인할 수 있다.</p>
<p>첫째, 크게 두 부분으로 구성되어 있는데, 왼편의 슬라이더가 있는 부분과 오른편의 히스토그램이 있는 부분으로 나뉜다. 부차적으로 상단에 제목(“Old Faithful Geyser Data”)이 있는 부분도 존재한다. 이 모든 것이 UI를 구성한다. 위에서 UI는 입력을 받고 출력을 표출한다고 했다. 왼편의 슬라이더바가 입력을 받는 부분이고, 오른편의 플롯 영역이 출력을 표출하는 부분이다.</p>
<p>둘째, 사용자의 입력은 빈(bin)의 갯수이고, Server는 이 값을 바탕으로 히스토그램이라는 출력을 생성한다. 생성된 출력은 UI로 이동하여 표출된다. 사용자의 입력값이 바뀌면 이 과정이 반복되고 히스토그램이 바뀌게 된다.</p>
</section>
</section>
<section id="shiny의-기본-문법-체계" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="shiny의-기본-문법-체계"><span class="header-section-number">2</span> Shiny의 기본 문법 체계</h2>
<p>이제 <a href="#fig-first" class="quarto-xref">그림&nbsp;3</a> 의 웹 앱을 생성한 코드를 살펴보도록 한다. 코드 속에는 다양한 설명이 포함되어 있는데 그것을 제거하고 코드만 남기면 다음만 남는다. 대충 보아도 문법이 <a href="https://tidyverse.org/"><strong>tidyverse</strong></a>와는 많이 다르다는 점을 금방 알 수 있다. 따라서 <a href="https://rstudio.github.io/shiny/"><strong>shiny</strong></a>의 문법 체계는 따로 익힐 수 밖에 없다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Old Faithful Geyser Data"</span>),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">"bins"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"Number of bins:"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">50</span>, <span class="at">value =</span> <span class="dv">30</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">"distPlot"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        x    <span class="ot">&lt;-</span> faithful[, <span class="dv">2</span>]</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hist</span>(x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="st">'darkgray'</span>, <span class="at">border =</span> <span class="st">'white'</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">'Waiting time to next eruption (in mins)'</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">main =</span> <span class="st">'Histogram of waiting times'</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>코드를 자세히 살펴보자. 우선 <a href="https://rstudio.github.io/shiny/"><strong>shiny</strong></a>라는 R 패키지를 불러와야 한다. 코드가 <code>ui</code>, <code>server</code>, <code>shinyApp</code>의 세 부분으로 나뉘어져 있다는 것을 알 수 있고, 이것이 위에서 설명한 UI 부분, Server 부분, 결합 및 실행 부분을 담당한다는 점을 쉽게 이해할 수 있다.</p>
<section id="ui-부분" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="ui-부분"><span class="header-section-number">2.1</span> UI 부분</h3>
<p>UI 부분은 다양한 함수들이 위계 구조를 이루고 있는데, 전체 형태를 결정하는 <strong>UI 구조 함수(컨테이너 함수)</strong>가 <strong>입력 함수와 출력 함수</strong>를 둘러싸고 있는 구조이다. <a href="#fig-container" class="quarto-xref">그림&nbsp;4</a> 는 이것을 요약한 것이다.</p>
<div id="fig-container" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-container-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://mastering-shiny.org/diagrams/action-layout/sidebar.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="그림&nbsp;4: UI 컨테이너 함수의 계층 구조 https://mastering-shiny.org/action-layout.html"><img src="https://mastering-shiny.org/diagrams/action-layout/sidebar.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="544"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-container-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;4: UI 컨테이너 함수의 계층 구조 <a href="https://mastering-shiny.org/action-layout.html" class="uri">https://mastering-shiny.org/action-layout.html</a>
</figcaption>
</figure>
</div>
<p>첫째, 컨테이너 함수가 위계 구조를 이루고 있다. 최상위 <code>fluidPage()</code> 함수는 <code>titlePanel()</code>과 <code>sidebarLayout()</code>로 구성되고, <code>sidebarLayout()</code>은 다시 <code>sidebarPanel()</code>과 <code>mainPanel()</code>로 구성된다. 하나씩 위계적으로 살펴보면 다음과 같다.</p>
<ul>
<li><p><code>fluidPage()</code> : UI의 최상위 컨테이너로서 전체 UI 구조를 관장하며, 브라우저 화면 크기에 따라 자동으로 늘어나고 줄어드는 반응형 레이아웃을 제공한다. 이러한 특성 때문에 ’fluid’라는 이름이 붙었다. 고정 폭을 가진 레이아웃은 <code>fixedPage()</code>를 통해 정의할 수 있다. Shiny 앱에서는 기본적으로 <code>fluidPage()</code>를 사용한다고 생각하면 된다.</p>
<ul>
<li><p><code>titlePanel()</code> : 제목이 들어가는 부분이다. 생략가능하다.</p></li>
<li><p><code>sidebarLayout()</code>: UI의 핵심 부분으로, 가장 전형적인 “사이드바 + 메인 영역” 레이아웃을 <code>fluidPage()</code> 내에 생성할 수 있게 해준다.</p>
<ul>
<li><p><code>sidebarPanel()</code>: 입력을 받는 부분으로, 입력 함수 혹은 입력 위젯(widget)을 담는 컨테이너이다.</p></li>
<li><p><code>mainPanel()</code> : 출력을 표출하는 부분으로, 서버에서 생성된 출력 객체가 UI에 표시될 수 있도록 출력 함수를 담는 컨테이너이다.</p></li>
</ul></li>
</ul></li>
</ul>
<p>둘째, <code>sidebarPanel()</code> 내의 <code>sliderInput()</code>은 특정한 <strong>입력 함수</strong> 혹은 입력 위젯 생성 함수이다. 여기서는 슬라이더 형태의 입력을 받기 때문에 <code>sliderInput()</code> 함수가 사용된 것이다. 입력의 형태에 따라 다양한 입력 함수가 존재하며, 일반적으로 <code>*Input()</code> 형식을 띤다. 뒤에서 자세히 다룬다. 개별 함수는 상호작용형 인터페이스 컴포넌트로 미리 만들어져 있기 때문에 위젯이라고 부른다. <code>sliderInput()</code>은 다양한 인수로 구성되어 있는데, 가장 중요한 것이 <code>inputId</code> 인수이다. 입력 함수는 위젯을 통해 입력값을 받고 그 입력값은 Server의 <code>input</code> 객체의 한 요소가 되는데 <code>inputId</code> 인수는 <code>input</code> 객체에서 해당 요소를 참조할 ’이름’을 지정한다.</p>
<p>셋째, <code>mainPanel()</code> 내의 <code>plotOutput()</code>은 특정한 <strong>출력 함수</strong> 혹은 출력 바인딩(binding) 함수이다. 이것은 Server에서 전달받은 출력 즉 <code>output</code> 객체의 요소를 표출한다. 바인딩 함수라고 부르는 것은 출력 요소와 브라우저의 특정 UI 영역을 ’연결(바인드)’하기 때문이다. 출력의 형태가 플롯(plot)이기 때문에 <code>plotOutput()</code> 함수가 사용된 것이다. 출력의 형태에 따라 다양한 출력 표출 함수가 존재하며, 일반적으로 <code>*Output()</code>의 형식을 띤다. 뒤에서 자세히 다룬다. <code>plotOutput()</code> 함수의 가장 중요한 인수는 <code>outputId</code>로 표출할 <code>output</code> 객체의 요소의 ’이름’을 지정한다. <code>plotOutput(outputId = "distPlot")</code>는 서버에서 만들어진 <code>"distPlot"</code>라는 이름의 플롯(<code>output</code> 객체의 한 요소)을 해당 위치에 표출한다는 의미이다.</p>
<blockquote class="blockquote">
<p>결국 UI는 입력을 받고 출력을 표출하는 두 가지 일을 하는데, 전자는 <code>sliderInput()</code>과 같은 입력 함수를 통해 이루어지며, 후자는 <code>plotOutput()</code>과 같은 출력 함수를 통해 이루어진다. 이들 함수는 출력과 입력의 형식에 따라 일반적으로 <code>*Input()</code>과 <code>*Output()</code>의 형태를 띤다.</p>
</blockquote>
</section>
<section id="server-부분" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="server-부분"><span class="header-section-number">2.2</span> Server 부분</h3>
<p>Server 부분은 다음과 같은 구조를 가지고 있다.</p>
<p>첫째, Server 부분은 반드시 <strong>함수</strong>로 정의되며, 일반적으로 <code>function(input, output){}</code> 혹은 <code>function(input, output, session){}</code>의 형식을 갖는다(<code>input</code>과 <code>output</code>은 필수이지만 <code>session</code>은 부가적으로 정의될 수 있다). 반드시 함수로 정의되어야 하는 것은 <code>input</code>과 <code>output</code>(부가적으로 session)을 인수로 받아, 입력 변화에 따라 반응형 출력이 생성 및 갱신되는 로직을 정의하기 때문입니다.</p>
<p>둘째, 출력물은 <code>renderPlot({})</code>과 같은 <strong>렌더링 함수</strong>를 통해 이루어진다. 이렇게 생성된 출력은 ’이름’이 지정되어 Server의 <code>output</code> 객체의 한 요소로 저장된다. 예를 들어, 코드에서 <code>output$distPlot</code>은 생성된 출력에 <code>"distPlot"</code>이라는 이름을 부여하고 이를 <code>output</code> 객체에 해당 이름으로 저장함을 의미한다. 이 이름은 UI의 출력 함수 <code>plotOutput(outputId = "distPlot")</code>에서 사용되며, 이를 통해 해당 출력이 UI에 표출된다.</p>
<p>셋째, 출력의 형태가 플롯이기 때문에 <code>renderPlot({})</code> 함수가 사용된 것이다. 출력의 형태에 따라 다양한 렌더링 함수가 존재하며, 일반적으로 <code>render*({})</code>의 형식을 띤다. 뒤에서 자세히 다룬다.</p>
<p>넷째, 입력 함수로부터 전달되어 Server의 <code>input</code> 객체의 요소로 저장된 입력값은 렌더링 함수 내부에서 사용된다. 예를 들어, <code>seq(min(x), max(x), length.out = input$bins + 1)</code>에서 <code>sliderInput()</code> 함수로부터 전달된 <code>bins</code>라는 입력값(즉, <code>input</code> 객체의 한 요소)이 <code>seq()</code> 함수 내부에서 사용된다. 입력값이 달라짐에 따라 히스토그램의 모양이 달라지는 이유가 여기에 있다.</p>
<blockquote class="blockquote">
<p>결국 Server는 UI에서 전달된 입력에 기반하여 출력을 산출한다. 구체적으로, <code>input$*</code> 형식의 입력값을 Server 내부에서 사용하여 <code>renderPlot({})</code>과 같은 렌더링 함수를 통해 출력을 생성하고, 그 결과를 <code>output$*</code> 형식으로 저장함으로써 UI에 표출될 수 있도록 한다.</p>
</blockquote>
</section>
<section id="결합-및-실행-부분" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="결합-및-실행-부분"><span class="header-section-number">2.3</span> 결합 및 실행 부분</h3>
<p>UI와 server 부분은 결합되어 하나의 Shiny 웹 앱을 구성하며, 이를 실행하기 위해 <code>shinyApp()</code> 함수가 사용된다. <code>shinyApp(ui = ui, server = server)</code>에서 볼 수 있듯이, <code>shinyApp()</code> 함수에 UI 부분과 Server 부분을 지정함으로써 Shiny 웹 앱이 생성되고 실행된다.</p>
<p>이것은 단일 파일 방식으로 결합 및 실행을 행하는 것이다. 콘솔창에서 실행하고자 한다면 다음과 같이하면 된다. 파일명에 app.R과 같은 UI와 Server 부분이 모두 포함된 파일의 이름을 지정하면 된다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runApp</span>(<span class="st">"파일명"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>만일 UI와 Server 부분을 다른 파일로 구성하는 분리 파일 방식인 경우는 다음과 같이 진행한다. 우선 UI 부분의 파일을 따로 만든다. 예를 들어 ui.R이라는 스크립트 파일을 다음과 같이 생성한다. 단일 파일 방식과 달리 UI 부분을 ui 객체에 할당하지 않아도 된다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fluidPage</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Old Faithful Geyser Data"</span>),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">"bins"</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"Number of bins:"</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">50</span>, <span class="at">value =</span> <span class="dv">30</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">"distPlot"</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>마찬가지로 Server 부분의 파일을 따로 만든다. 예를 들어 server.R이라는 스크립트 파일을 다음과 같이 생성한다. 단일 파일 방식과 달리 Server 부분을 server라는 객체에 할당하지 않아도 된다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>(input, output) {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        x    <span class="ot">&lt;-</span> faithful[, <span class="dv">2</span>]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hist</span>(x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="st">'darkgray'</span>, <span class="at">border =</span> <span class="st">'white'</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">'Waiting time to next eruption (in mins)'</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">main =</span> <span class="st">'Histogram of waiting times'</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>콘솔 창에서 다음과 같이 실행한다. 이때 지정한 폴더에는 UI 부분을 정의한 파일(예: ui.R)과 server 부분을 정의한 파일(예: server.R)이 포함되어 있어야 한다. 이름은 반드시 ui.R과 server.R이어야 한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runApp</span>(<span class="st">"폴더명"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>위의 두 가지 방식을 결합한 제3의 길도 있다. 우선 위의 분리 파일 방식과 같이 UI와 Server 부분에 대한 파일을 개별적을 생성한다. 차이점은 반드시 ui와 server 객체를 할당하는 방식으로 이러우져야 한다는 점이다. my_ui.R의 내용은 다음과 같다. 이 방식에서는 UI 부분의 파일 이름이 반드시 ui.R일 필요가 없다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Old Faithful Geyser Data"</span>),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">"bins"</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"Number of bins:"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">50</span>, <span class="at">value =</span> <span class="dv">30</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>           <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">"distPlot"</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>my_server.R의 내용은 다음과 같다. 마찬가지로 Server 부분의 파일의 이름이 server.R일 필요가 없다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        x    <span class="ot">&lt;-</span> faithful[, <span class="dv">2</span>]</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hist</span>(x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="st">'darkgray'</span>, <span class="at">border =</span> <span class="st">'white'</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">'Waiting time to next eruption (in mins)'</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">main =</span> <span class="st">'Histogram of waiting times'</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>그리고 나서 단일 파일 방식과 같이 app.R 파일을 통해 결합한다. app.R 파일의 내용은 다음과 같다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"my_ui.R"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"my_server.R"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>UI 파일과 Server 파일을 분리하는 방식은 코드가 매우 복잡할 때 사용하는 것으로 보통은 단일 파일 방식을 사용한다.</p>
</section>
</section>
<section id="입력-함수와-출력-함수의-종류" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="입력-함수와-출력-함수의-종류"><span class="header-section-number">3</span> 입력 함수와 출력 함수의 종류</h2>
<section id="입력-함수" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="입력-함수"><span class="header-section-number">3.1</span> 입력 함수</h3>
<p>앞에서 언급한 것처럼, 입력 함수 혹은 입력 위젯 생성 함수의 종류는 다양하다. <a href="https://shiny.posit.co/r/components/">R Shiny Components</a> 웹페이지 기준으로 대략 25개 정도이다. <a href="#fig-widget" class="quarto-xref">그림&nbsp;5</a> 는 그 중 일부를 보여주고 있다.</p>
<div id="fig-widget" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-widget-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://shiny.posit.co/r/getstarted/build-an-app/images/cheatsheet-inputs.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="그림&nbsp;5: 입력 위젯의 종류(https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/ui-inputs.html)"><img src="https://shiny.posit.co/r/getstarted/build-an-app/images/cheatsheet-inputs.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-widget-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;5: 입력 위젯의 종류(<a href="https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/ui-inputs.html" class="uri">https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/ui-inputs.html</a>)
</figcaption>
</figure>
</div>
<p>몇 가지 주목할 사항이 있다.</p>
<p>첫째, 모든 함수의 이름이 <code>*Input()</code> 형식인 것은 아니다. 특히 버튼 형식의 경우 <code>*Button()</code> 혹은 <code>*Buttons()</code> 형식을 띤다. 이 외에 <code>*Link()</code>, <code>*switch()</code>로 끝나는 함수도 있다.</p>
<p>둘째, 입력 함수의 인수가 중요하다. 입력값에 이름을 부여하는 <code>inputID</code> 인수와 입력 위젯에 나타날 설명 글귀를 지정하는 <code>label</code> 인수는 공통이다. 그러나 나머지 인수는 입력 함수에 따라 달라진다. 위의 예에서 <code>sliderInput()</code> 입력 함수는 <code>min</code>, <code>max</code>, <code>value</code>라는 추가적인 인수를 갖는데, <code>min</code>과 <code>max</code>는 슬라이더의 최대 및 최소값을, <code>value</code>는 기본값을 지정하는 인수이다. 입력 함수별 인수에 대한 자세한 사항은 <a href="https://shiny.posit.co/r/components/">R Shiny Components</a> 웹페이지를 참조한다.</p>
</section>
<section id="출력-함수와-렌더링-함수" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="출력-함수와-렌더링-함수"><span class="header-section-number">3.2</span> 출력 함수와 렌더링 함수</h3>
<p>출력 함수는 서버에서 생성된 출력을 UI에서 표출해주는 함수인데 반해, 렌더링 함수는 서버에서 실질적으로 출력을 생성하는 함수이다. 출력 함수와 렌더링 함수 모두는 출력의 형식(플롯, 테이블, 텍스트, 이미지 등)에 따라 다양하기 때문에, 기본적으로 두 함수는 쌍을 이룰 수 밖에 없다.</p>
<p>다음은 다섯 가지 기본 쌍을 보여준다. 출력 함수는 <code>*Output()</code>의 형식을, 렌더링 함수는 <code>render*({})</code>의 형식을 취한다.</p>
<div id="tbl-out1" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[25, 50, 25]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-out1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;1: 기본 출력 함수와 렌더링 함수 쌍
</figcaption>
<div aria-describedby="tbl-out1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 50%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>형식</th>
<th>출력 함수(UI)</th>
<th>렌더링 함수(Server)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>플롯</td>
<td><code>plotOutput(outputID = "")</code></td>
<td><code>renderPlot({})</code></td>
</tr>
<tr class="even">
<td>테이블</td>
<td><code>tableOutput(outputID = "")</code></td>
<td><code>renderTable({})</code></td>
</tr>
<tr class="odd">
<td>일반 텍스트</td>
<td><code>textOutput(outputID = "")</code></td>
<td><code>renderText({})</code></td>
</tr>
<tr class="even">
<td>사전 포맷된 텍스트</td>
<td><code>verbatimeTextOutput(outputID = "")</code></td>
<td><code>renderPrint({})</code></td>
</tr>
<tr class="odd">
<td>이미지</td>
<td><code>imageOutput(outputID = "")</code></td>
<td><code>renderImage({})</code></td>
</tr>
<tr class="even">
<td>HTML 원문</td>
<td><code>uiOutput(outputID = "")</code></td>
<td><code>renderUI({})</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>그런데 특히 주요 시각화 패키지들은 Shiny 웹 앱 구축을 염두에 두고 개별적인 출력 함수와 렌더링 함수를 제공하고 있다. 중요한 패키지에 대해 이를 정리하면 다음과 같다. 모두 <code>패키지명Output()</code>형식과 <code>render패키지명({})</code>의 형식을 띤다.</p>
<div id="tbl-out2" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[25, 50, 25]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-out2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;2: 주요 패키지별 출력 함수와 렌더링 함수 쌍
</figcaption>
<div aria-describedby="tbl-out2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 50%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>패키지</th>
<th>출력 함수(UI)</th>
<th>렌더링 함수(Server)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://rstudio.github.io/DT/"><strong>DT</strong></a></td>
<td><code>DTOutput(outputID = "")</code></td>
<td><code>renderDT({})</code></td>
</tr>
<tr class="even">
<td><a href="https://glin.github.io/reactable/"><strong>reactable</strong></a></td>
<td><code>reactableOutput(outputID = "")</code></td>
<td><code>renderReactable({})</code></td>
</tr>
<tr class="odd">
<td><a href="https://plotly.com/r/"><strong>plotly</strong></a></td>
<td><code>plotlyOutput(outputID = "")</code></td>
<td><code>renderPlotyl({})</code></td>
</tr>
<tr class="even">
<td><a href="https://echarts4r.john-coene.com/"><strong>echarts4r</strong></a></td>
<td><code>echarts4rOutput(outputID = "")</code></td>
<td><code>renderEcharts4r({})</code></td>
</tr>
<tr class="odd">
<td><a href="https://rstudio.github.io/leaflet/"><strong>leaflet</strong></a></td>
<td><code>leafletOutput(outputID = "")</code></td>
<td><code>renderLeaflet({})</code></td>
</tr>
<tr class="even">
<td><a href="https://r-tmap.github.io/tmap/"><strong>tmap</strong></a></td>
<td><code>tmapOutput(outputID = "")</code></td>
<td><code>renderTmap({})</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Shiny 웹 앱에서의 활용을 염두에 둔 패키지들은 모두 이러한 출력 함수의 쌍을 제공하고 있다. 따라서 출력 함수는 굉장히 많을 수 있다. <a href="https://shiny.posit.co/r/components/">R Shiny Components</a> 웹페이지는 기본 5개의 함수쌍에 주요 패키지를 포함하는 12개 정도의 출력 함수쌍을 예시로 제시하고 있다.</p>
</section>
</section>
<section id="bslib-패키지를-활용한-현대적-ui-구조-디자인" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="bslib-패키지를-활용한-현대적-ui-구조-디자인"><span class="header-section-number">4</span> <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지를 활용한 현대적 UI 구조 디자인</h2>
<section id="개요-1" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="개요-1"><span class="header-section-number">4.1</span> 개요</h3>
<p>위에서 Shiny의 전체 레이아웃은 위계적으로 구성된 UI 구조 함수, 즉 컨테이너 함수들에 의해 결정된다고 했다. <code>fluidPage()</code>, <code>titlePanel()</code>, <code>sidebarLayout()</code>, <code>sidebarPanel()</code>, <code>mainPanel()</code> 과 같은 컨테이너 함수를 통해 <a href="#fig-first" class="quarto-xref">그림&nbsp;3</a> 에 나타나 있는 것과 같은 외향의 UI 구조가 완성된 것이다.</p>
<p>보다 <strong>현대적인</strong> UI 구조 디자인을 위해 등장한 것이 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지이다. <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지는 Bootstrap을 기반으로 Shiny와 R Markdown을 위한 현대적인 UI 도구 모음을 제공한다. <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a>패키지는 다양하고 유연한 <strong>컨테이너</strong> <strong>함수</strong>를 제공할 뿐만 아니라, 카드(card), 밸류 박스(value box), 사이드바(sidebar) 등 재사용 가능한 <strong>UI 컴포넌트</strong>(콘텐츠 구성요소)를 통해 Shiny 웹 앱과 문서를 효율적으로 구성할 수 있게 한다(전통적인 Shiny에 부족한 부분). 또한 테마 시스템을 활용하여 웹 앱과 문서의 외관을 유연하게 사용자 정의하고, 이를 실시간으로 조정할 수 있다. 나아가 최신 Bootstrap 및 Bootswatch를 지원함으로써, 기본적으로 Bootstrap 3에 의존하는 기존 Shiny 및 R Markdown 환경에 비해 보다 현대적이고 일관된 웹 UI 구현을 가능하게 한다.</p>
<p><a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지를 이용해 좀 더 현대적인 감각의 웹 앱을 생성하기 위해서는 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지에서 제공되는 다양한 <strong>UI 컨테이너 함수와 UI 컴포넌트 함수</strong>를 익혀야 하며, 뒤에서 자세히 다룬다. 여기서는 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지를 통해 <a href="#fig-first" class="quarto-xref">그림&nbsp;3</a> 웹 앱이 어떻게 달라지는지에 대해서만 살펴본다.</p>
<p><a href="https://rstudio.github.io/shiny/"><strong>Shiny</strong></a> 패키지는 기본적으로 11개의 예제 웹 앱을 제공한다. 다음과 같이 실행해 본다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">runExample</span>()</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이 들 중 첫 번째 예제인 “01_hello”가 <a href="#fig-first" class="quarto-xref">그림&nbsp;3</a> 에 나타나 있는 웹 앱이다. 해당 예제를 실행하려면 다음과 같이 하면 된다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runExample</span>(<span class="st">"01_hello"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>아래의 <a href="#fig-bslib-1" class="quarto-xref">그림&nbsp;6</a> 와 같은 웹 앱이 생성된다. 이것을 <a href="#fig-first" class="quarto-xref">그림&nbsp;3</a> 과 비교해 보라. 조금 다르다는 것을 쉽게 알아 챌 수 있는데(왼편 슬라이더바에서 &lt; 를 눌러보라.), 이것이 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지를 활용하여 제작된 웹 앱이다.</p>
<div id="fig-bslib-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bslib-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/clipboard-1762722241.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="그림&nbsp;6: bslib 패키지를 활용한 웹 앱의 예제"><img src="images/clipboard-1762722241.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bslib-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;6: <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지를 활용한 웹 앱의 예제
</figcaption>
</figure>
</div>
<p>웹 앱 뿐만 아니라 코드도 살펴보려면 다음과 같이 실행하면 된다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runExample</span>(<span class="st">"01_hello"</span>, <span class="at">display =</span> <span class="st">"showcase"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>삽입되어 있는 설명 부분을 제거하고 코드만 남기면 다음과 같다. 이것을 <a href="#fig-first" class="quarto-xref">그림&nbsp;3</a> 의 코드와 비교해 보라. 오로지 UI 부분의 코드만 다르고, 그것도 UI 함수명만 달라져 있다는 것을 알 수 있다(입력 함수, 출력 함수, 렌더링 함수는 그대로이다). 결국 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지는 UI 구조만 바꾼다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">page_sidebar</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Hello Shiny!"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">sidebar =</span> <span class="fu">sidebar</span>(</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">inputId =</span> <span class="st">"bins"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="st">"Number of bins:"</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">50</span>, <span class="at">value =</span> <span class="dv">30</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">"distPlot"</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> faithful<span class="sc">$</span>waiting</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hist</span>(</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>      x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="st">"#75AADB"</span>, <span class="at">border =</span> <span class="st">"white"</span>,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab =</span> <span class="st">"Waiting time to next eruption (in mins)"</span>,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">main =</span> <span class="st">"Histogram of waiting times"</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>첫째, <code>page_sidebar()</code>가 최상위 <strong>컨테이너</strong> 함수이다. <code>page_sidebar()</code>는 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a>에서 가장 널리 사용되는 페이지 컨테이너 함수로, 전체 너비를 차지하는 헤더(제목)와 사용자 입력을 위한 사이드바를 갖춘 대시보드형 UI 구조를 손쉽게 구성할 수 있도록 설계되었다. <code>page_sidebar()</code>함수는 전통적인 Shiny 컨테이너 함수 중 <code>fluidPage()</code>, <code>titlePanel()</code>, <code>sidebarLayout()</code> 함수의 역할을 동시에 수행한다고 생각할 수 있다.</p>
<p>둘째, <code>page_sidebar()</code> 의 여러 인수가 전통적인 <code>titlePanel()</code> 함수와 <code>sidebarLayout()</code>의 하위 함수인 <code>sidebarPanel()</code> 함수를 대신한다.</p>
<ul>
<li><p><code>title</code>: 대시보드의 제목을 설정할 수 있으며, <code>titlePanel()</code> 함수와 동일한 기능을 한다.</p></li>
<li><p><code>sidebar = sidebar()</code>: <code>sidebarPanel()</code> 함수와 동일한 기능을 한다. <code>sidebarPanel()</code> 함수 속에 입력 함수인 <code>siderInput()</code> 함수가 들어 있었던과 동일하게 <code>sidebar()</code> 속에 <code>siderInput()</code> 함수가 들어 있다.</p></li>
</ul>
<p>셋째, 전통적인 Shiny의 <code>mainPanel()</code> 함수 없이 출력 함수(<code>plotOutput()</code>)가 막바로 사용된다. 그러나 이것은 가장 단순한 방식으로, 대표적인 컴포넌트 함수인 <code>card()</code> 함수를 사용하면 보다 풍성한 옵션을 사용할 수 있다. <code>card()</code> 함수 내부에서 <code>card_header()</code>와 <code>card_body()</code>라는 컴포넌트 함수를 활용한다. 아래는 위의 코드에 대해 두 가지 부가적인 조치를 한 것이다. 첫째, <code>card()</code> 함수를 통해 출력 표출 부분을 보완한다. 둘째, 기본 플롯 함수 대신 <a href="https://ggplot2.tidyverse.org/"><strong>ggplot2</strong></a> 패키지를 통해 히스토그램을 작성하고 그것을 <a href="https://plotly.com/r/"><strong>plotly</strong></a> 패키지의 <code>ggplotly()</code> 함수를 통해 인터랙티브 플롯을 생성한다. <a href="https://plotly.com/r/"><strong>plotly</strong></a> 패키지의 출력 생성 및 출력 표출을 위해 <code>renderPlotly({})</code>와 <code>plotlyOutput()</code> 함수가 활용되는 점에 주목한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">page_sidebar</span>(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Hello Shiny!"</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">sidebar =</span> <span class="fu">sidebar</span>(</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">inputId =</span> <span class="st">"bins"</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="st">"Number of bins:"</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">50</span>, <span class="at">value =</span> <span class="dv">30</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">card</span>(</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">card_header</span>(<span class="st">"ggplot2: Histogram"</span>),</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">card_body</span>(</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotlyOutput</span>(<span class="at">outputId =</span> <span class="st">"distPlot"</span>)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    x    <span class="ot">&lt;-</span> faithful[, <span class="dv">2</span>]</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">x =</span> x), <span class="at">bins =</span> input<span class="sc">$</span>bins, <span class="at">fill =</span> <span class="st">'darkgray'</span>, <span class="at">color =</span> <span class="st">'white'</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">'Waiting time to next eruption (in mins)'</span>,</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequencies"</span>,</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">'Histogram of waiting times'</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplotly</span>(gg)</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="ui-컨테이너-함수" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="ui-컨테이너-함수"><span class="header-section-number">4.2</span> UI 컨테이너 함수</h3>
<p>UI 컨테이너 함수란 다른 UI 요소를 담되, 그 자체가 시각적 콘텐츠의 주제가 되지 않고 공간, 전환, 계층 구조를 정의하는 함수이다. 컨테이너 함수는 크게 세 가지로 나뉜다.</p>
<ul>
<li><p>페이지 컨테이너: 페이지 전체의 폭, 높이, 스크롤 방식 등 최상위 UI 구조를 정의하는 컨테이너로, <code>page_*()</code> 형태를 띤다.</p></li>
<li><p>레이아웃 컨테이너: 페이지 내부에서 여러 UI 요소를 동시에 어떻게 배치할지를 결정하는 컨테이너로, <code>layout_*()</code> 형태를 띤다.</p></li>
<li><p>내비게이션 컨테이너: 여러 UI 패널을 묶어 사용자 상호작용에 따라 표시되는 콘텐츠를 전환하는 컨테이너로, <code>navset_*()</code>의 형태를 띤다.</p></li>
</ul>
<p>분류별 컨테이너 함수를 정리하면 <a href="#tbl-bslib1" class="quarto-xref">표&nbsp;3</a> 과 같다. 자세한 사항은 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지 홈페이지의 <a href="https://rstudio.github.io/bslib/articles/dashboards/index.html">Get Started</a>나 <a href="https://rstudio.github.io/bslib/articles/column-layout/index.html">Layouts</a>를 참고할 수 있다.</p>
<div id="tbl-bslib1" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[25, 32, 43]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-bslib1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;3: bslib 컨테이너 함수
</figcaption>
<div aria-describedby="tbl-bslib1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 32%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th>분류</th>
<th>함수</th>
<th>특징</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>페이지 컨테이너(기본)</td>
<td><p><code>page_fixed()</code></p>
<p><code>page_fluid()</code></p>
<p><code>page_fillable()</code></p></td>
<td><p>고정형(고정폭: 940픽셀)</p>
<p>유동형(웹페이지의 전체 폭)</p>
<p>대시보드형(웹페이지의 전체 폭/높이)</p></td>
</tr>
<tr class="even">
<td>페이지 컨테이너(확장)</td>
<td><p><code>page_sidebar()</code></p>
<p><code>page_navbar()</code></p></td>
<td><p>표준형(전역적 사이드바 포함)</p>
<p>다중 페이지, <code>nav_panel()</code>의 집합</p></td>
</tr>
<tr class="odd">
<td>레이아웃 컨테이너</td>
<td><p><code>layout_siderbar()</code></p>
<p><code>layout_columns()</code></p>
<p><code>layout_column_wrap()</code></p></td>
<td><p><code>page_*()</code>, <code>card()</code>, <code>nav_panel()</code> 내부</p>
<p><code>page_sidebar()</code> 내부</p>
<p><code>nav_panel()</code> 내부</p></td>
</tr>
<tr class="even">
<td><p>내비게이션 컨테이너</p>
<p>(페이지/레이아웃 레벨)</p></td>
<td><p><code>navset_tab()</code></p>
<p><code>navset_pill()</code></p>
<p><code>navset_underline()</code></p></td>
<td><code>nav_panel()</code>의 집합</td>
</tr>
<tr class="odd">
<td><p>내비게이션 컨테이너</p>
<p>(카드 레벨)</p></td>
<td><p><code>navset_card_tab()</code></p>
<p><code>navset_card_pill()</code></p>
<p><code>navset_card_underline()</code></p></td>
<td><code>nav_panel()</code>의 집합</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>우선 단일 페이지의 구조를 결정하는 가장 기본적인 <strong>페이지 컨테이너</strong> 함수에 <code>page_fixed()</code>, <code>page_fluid()</code>, <code>page_fillable()</code> 가 있다. <code>page_fixed()</code>는 중앙 정렬된 고정 폭 페이지 컨테이너이고, <code>page_fluid()</code>는 브라우저 폭에 따라 콘텐츠 영역이 유동적으로 변화는 페이지 컨테이너이고, <code>page_fillable()</code>는 브라우저의 가시 영역을 높이까지 포함해 채우도록 설계된 페이지 컨테이너이다. <a href="#fig-page_container" class="quarto-xref">그림&nbsp;7</a> 는 이 세가지 페이지 컨테이너를 개념적으로 비교하고 있다.</p>
<div id="fig-page_container" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-page_container-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://shiny.posit.co/r/articles/build/layout-guide/pages.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="그림&nbsp;7: 페이지 컨테이너의 종류(https://shiny.posit.co/r/articles/build/layout-guide/)"><img src="https://shiny.posit.co/r/articles/build/layout-guide/pages.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-page_container-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7: 페이지 컨테이너의 종류(<a href="https://shiny.posit.co/r/articles/build/layout-guide/" class="uri">https://shiny.posit.co/r/articles/build/layout-guide/</a>)
</figcaption>
</figure>
</div>
<p>그러나 가장 중요한 페이지 컨테이너 함수는 <code>page_sidebar()</code>로 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지의 표준이다. 이것은 페이지 전체를 채우는 구조 위에 사이드바-메인 영역 분할을 기본으로 제공하는 고수준 페이지 컨테이너이다. 단순히 예기하면 <code>page_sidebar()</code>는 <code>page_fillable()</code>과 레이아웃 컨테이너인 <code>layout_siderbar()</code>를 결합한 것으로 이해할 수 있다. <code>page_navbar()</code>는 상단 내비게이션 바를 페이지의 기본 구조로 표함하여, 여러 화면을 전환하는 앱을 구성하는 고수준 페이지 컨테이너이다. <code>page_navbar()</code>는 개념적으로 페이지 컨테이너와 내비게이션 컨테이너(navbar)을 통합한다.</p>
<p><strong>레이아웃 컨테이너</strong>는 페이지 전체가 아니라 페이지 내부 배치를 담당하는데, 페이지 컨테이너와 달리 중첩 사용이 가능하지만 콘텐츠 자체를 표현하지는 않는다. <code>layout_siderbar()</code>는 사이드바와 메인 콘텐츠 영역으로 화면을 이분하는 레이아웃 컨테이너를 생성하는데 <code>page_*()</code>, <code>card()</code>, <code>nav_panel()</code> 내부 어디에도 존재할 수 있다. <code>layout_columns()</code>는 여러 UI 요소를 동일 행 내의 다중 컬럼으로 배치하는 레이아웃 컨테이너를 생성한다. 컬럼의 수와 폭을 명시적으로 제어할 수 있으며 정돈된 레이아웃 구현에 용이하다. <code>layout_column_wrap()</code>은 컬럼을 행 단위로 자동 줄바꿈하여 반응형 배치를 제공하는 레이아웃 컨테이너이다. 컬럼 폭 기준으로 자동 배치하며 화면 크기에 따라 행 수가 동적으로 변한다.</p>
<p><strong>내비게이션 컨테이너</strong>는 여러 UI 패널을 묶어 사용자 상호작요에 따라 표시되는 콘텐츠를 전환하는 컨테이너로, 페이지 컨테이너나 레이아웃 컨테이너의 내부에서 사용된다. 한 번에 하나의 패널만 활성화되며, 공간 배치가 아니라 상태 전환을 담당한다. <code>navset_tab()</code>, <code>navset_pill()</code>, <code>navset_underline()</code>는 모두 <code>nav_panel()</code>들의 집합으로 구성되며, 콘텐츠 전환의 방식이 다를 뿐이다. <code>navset_tab()</code>는 전통적인 탭 모양을, <code>navset_pill()</code>는 둥근 필(pill) 모양의 버튼을, <code>navset_underline()</code>는 밑줄을 그은 형태를 제공한다. <code>navset_card_tab()</code>, <code>navset_card_pill()</code>, <code>navset_card_underline()</code>은 동일한 기능을 하지만 <code>card</code> 스타일을 기본으로 내장한 컨테이너이다. <code>navset_*()</code> 함수가 페이지 또는 레이아웃의 주요 내비게이션과 같은 비교적 상위 UI 계층에서 사용되는데 반해 <code>navset_card_*()</code> 함수는 주로 콘텐츠 블록 내부에 위치하여 카드 수준의 국소적 전환에 사용된다.</p>
</section>
<section id="ui-컴포넌트-콘텐츠-구성요소" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="ui-컴포넌트-콘텐츠-구성요소"><span class="header-section-number">4.3</span> UI 컴포넌트: 콘텐츠 구성요소</h3>
<p>UI 컴포넌트는 UI 구조를 정의하지 않고, 컨테이너 내부에서 정보와 기능을 하나의 의미 있는 시각적 단위로 표현하는 재사용 가능한 UI 구성 요소로 역시 함수의 형태로 주어진다. 컨테이너가 아니므로 구조에 관여하지 않으며, 사용자가 하나의 UI 플록으로 인식하는 부분이다. 컨테이너가 아니므로 페이지나 레이아웃 구조에 직접 관여하지 않으며, 사용자가 하나의 UI 블록으로 인식하는 부분을 이룬다. 이러한 컴포넌트는 여러 위치에서 반복 사용될 수 있고, 시각적 스타일과 의미를 함께 지닌다는 특징이 있다. <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a>에서 제공하는 대표적인 콘텐츠 컴포넌트로는 카드(card), 사이드바(sidebar), 밸류 박스(value box), 툴팁(tooltip), 팝오버(popover) 등이 있다. 보다 자세한 내용은 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지 공식 홈페이지의 <a href="https://rstudio.github.io/bslib/articles/cards/index.html">Components</a> 섹션을 참고할 수 있다.</p>
<section id="카드" class="level4" data-number="4.3.1">
<h4 data-number="4.3.1" class="anchored" data-anchor-id="카드"><span class="header-section-number">4.3.1</span> 카드</h4>
<p>카드(card)는 현대적인 UI에서 가장 널리 사용되는 정보 구성 단위 중 하나이다. 기본적으로 카드는 테두리와 여백을 갖는 직사각형 컨테이너에 불과하지만, 관련된 정보를 의미 있게 묶어 제시할 경우 사용자가 내용을 보다 쉽게 이해하고, 집중하며, 탐색할 수 있도록 돕는다. 이러한 특성 때문에 카드는 대시보드와 UI 설계에서 핵심적인 역할을 하며, 대부분의 성공적인 대시보드 및 UI 프레임워크는 카드를 주요 컴포넌트로 채택하고 있다. <code>card()</code> 함수는 다음과 같은 컴포넌트 함수를 갖는다.</p>
<ul>
<li><p><code>card_header()</code>: 제목</p></li>
<li><p><code>card_body()</code>: 주 콘텐츠(생략 가능: 바로 출력 표출 함수 표시 가능)</p></li>
<li><p><code>card_footer()</code>: 부가 설명</p></li>
</ul>
</section>
<section id="사이드바" class="level4" data-number="4.3.2">
<h4 data-number="4.3.2" class="anchored" data-anchor-id="사이드바"><span class="header-section-number">4.3.2</span> 사이드바</h4>
<p>사이드바(sidebar)는 필터, 설정, 기타 입력 요소를 사용자가 쉽게 접근할 수 있도록 제공하는 핵심 UI 컴포넌트로, 이들이 제어하는 대화형 기능과 나란히 배치된다는 점이 특징이다. 사이드바를 활용하면 사용자 입력과 결과 출력 간의 관계를 명확히 할 수 있어, 대시보드의 사용성과 탐색성이 크게 향상된다. <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a>에서는 <code>page_sidebar()</code>와 <code>page_navbar()</code> 함수를 통해 페이지 수준(page-level)의 사이드바 레이아웃을 기본적으로 제공하며, 이 외에도 다양한 형태의 사이드바 레이아웃을 지원하여 인터페이스의 목적과 복잡도에 따라 유연한 UI 설계를 가능하게 한다.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">노트</span>사이드바 컴포넌트와 사이드바 레이아웃
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>사이드바 컴포넌트와 사이드바 레이아웃은 다르다. 사이드바 레이아웃은 공간을 나누는 구 조를 의미한다면, 사이드바 컴포넌트는 콘텐츠를 담는 UI 블록이다. 입력 위젯, 텍스트, 메뉴 등이 포함되며 독립적인 UI가 의미가 있다. 사이드바 레이아웃의 중요 함수에는 앞에서 살펴본 것과 같은 <code>page_sidebar()</code>, <code>layout_sidebar()</code> 등이 있고, 사이드바 컴포넌트의 대표적인 함수에 <code>sidebar()</code>가 있다.</p>
<p><a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a>에서 제공하는 사이드바 레이아웃은 크게 부유형(floating), 채움형(filling), 다중 페이지/탭형(multi-page/tab)의 세 가지로 구분할 수 있다.</p>
<p>부유형 레이아웃은 <code>layout_sidebar()</code>를 사용하는데, 페이지의 어느 위치에나 배치할 수 있는 사이드바 레이아웃을 구성할 수 있다. 이 방식은 의미적으로 관련된 입력 요소와 출력 요소를 시각적으로 함께 묶어 제시하는 데 적합하다. 또한 <code>card()</code>와 함께 사용하면 전체 화면 확장(full-screen), 헤더·푸터 추가 등 카드가 제공하는 다양한 기능을 활용할 수 있다.</p>
<p>채움형 레이아웃은 <code>page_sidebar()</code>를 사용하는데 페이지 전체를 채우는 사이드바 레이아웃을 생성한다. 내부적으로 <code>page_sidebar()</code>는 <code>page_fillable()</code>과 <code>layout_sidebar()</code>를 단순히 감싼(wrapper) 함수에 불과하다. 이 구조를 이해하면, 하나의 채움형 레이아웃 안에 여러 개의 사이드바 레이아웃을 유연하게 배치할 수 있는 가능성이 열린다.</p>
<p>다중 페이지/탭 레이아웃은 <code>page_navbar()</code>나 <code>navset_card_tab()</code> 내부에서 <code>sidebar</code> 인수를 사용해 사이드바를 구성할 수 있다. 이 경우 사이드바는 페이지 전체를 채우는 동시에, 모든 페이지나 탭에서 동일하게 유지되어 표시된다. 이후에는 페이지별로 서로 다른 레이아웃을 구성하는 방법도 다루겠지만, 모든 페이지에서 동일한 사이드바를 사용하는 것이 바람직한 경우도 많다. 이러한 경우에는 <code>conditionalPanel()</code>을 활용하여 특정 페이지에서만 사이드바의 일부 내용을 표시하거나 숨길 수 있다.</p>
</div>
</div>
</div>
</section>
<section id="밸류-박스" class="level4" data-number="4.3.3">
<h4 data-number="4.3.3" class="anchored" data-anchor-id="밸류-박스"><span class="header-section-number">4.3.3</span> 밸류 박스</h4>
<p>밸류 박스(value box)는 대시보드에서 핵심적인 수치나 지표를 한눈에 전달하기 위해 사용되는 UI 컴포넌트이다. 값(value), 설명(label), 아이콘(icon) 등을 함께 제시하여 사용자가 현재 상태나 주요 변화를 빠르게 파악할 수 있도록 돕는다. <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a>의 <code>value_box()</code> 함수는 카드(card) 기반 설계를 따르므로 다른 UI 요소들과 시각적으로 일관되게 어우러지며, Shiny의 반응성과 결합해 값이 동적으로 갱신되는 대시보드를 구성하는 데 특히 유용하다.</p>
<p><code>value_box()</code> 함수는 네 가지 주요 구성 요소로 이루어진다.</p>
<ul>
<li><p><strong>value</strong>는 표시하고자 하는 핵심 수치나 텍스트 값으로, 대시보드에서 가장 중요한 정보를 전달한다. 출력 표출 함수를 사용할 수도 있다.</p></li>
<li><p><strong>title</strong>은 value 위에 선택적으로 표시되는 설명 텍스트로, 해당 값의 의미나 지표명을 명확히 한다.</p></li>
<li><p><strong>showcase</strong>는 아이콘이나 기타 UI 요소와 같이 <strong>value</strong> 옆에 함께 배치되는 시각적 요소로, 정보를 보다 직관적으로 인식하도록 돕는다. <code>bs_icon()</code> 컴포넌트 함수를 주로 사용한다.</p></li>
<li><p><strong>theme</strong>은 값 상자의 색상이나 스타일을 조정하는 선택적 설정으로, 대시보드의 전체 디자인과 시각적 일관성을 유지하거나 강조 효과를 줄 수 있다.</p></li>
</ul>
</section>
<section id="툴팁과-팝오버" class="level4" data-number="4.3.4">
<h4 data-number="4.3.4" class="anchored" data-anchor-id="툴팁과-팝오버"><span class="header-section-number">4.3.4</span> 툴팁과 팝오버</h4>
<p>툴팁(tooltip)과 팝오버(popover)는 화면을 방해하지 않으면서 추가 정보를 제공하거나 상호작용을 가능하게 하는 유용한 UI 요소이다. 툴팁은 주로 간단한 설명을 표시하는 데 사용되며, 팝오버는 보다 풍부한 정보 제공이나 사용자 입력을 포함한 상호작용을 지원한다. 예를 들어, <code>card_header()</code>에 “도움말” 아이콘과 함께 <code>tooltip()</code>을 부착하면 사용자가 시각화된 데이터에 대한 추가 설명을 손쉽게 확인할 수 있다. 또한 동일한 헤더 영역에 “설정” 아이콘과 <code>popover()</code>를 연결하면 시각화의 매개변수를 직접 제어할 수 있는 인터페이스를 제공할 수 있다. 더 나아가 <code>card_footer()</code>의 링크에 <code>popover()</code>를 적용하면 추가 정보의 표시뿐 아니라 하이퍼링크와 같은 상호작용 요소를 함께 제공할 수 있어, 정보 탐색과 사용자 경험을 동시에 향상시킨다.</p>
<p>구현 방식 측면에서 보면, 툴팁과 팝오버는 매우 유사하다. 두 컴포넌트 모두 사용자의 상호작용을 통해 표시 여부가 전환되는 트리거(trigger) UI 요소와, 화면에 표시될 메시지 내용을 필요로 한다. <code>tooltip()</code>과 <code>popover()</code>는 공통적으로 첫 번째 인수를 트리거로 취급하며, 이름이 지정되지 않은 나머지 인수들은 메시지 내용으로 사용된다. 또한 <code>popover()</code>의 경우에는 선택적으로 제목(title)을 함께 지정할 수 있다.</p>
<p>반면, 사용자 경험(UX)과 활용 목적 측면에서는 두 컴포넌트의 성격이 뚜렷이 다르다. 툴팁은 포커스나 마우스 오버(hover)에 의해 표시되는 반면, 팝오버는 클릭을 통해 열리고 닫힌다. 이로 인해 팝오버는 툴팁보다 화면에 더 오래 유지되는, 즉 상대적으로 지속성이 높은 인터페이스이며, 추가적인 사용자 상호작용이 필요한 경우에 적합하다. 따라서 간단한 설명과 같은 읽기 전용(read-only) 정보에는 툴팁을 사용하는 것이 바람직하고, 메시지 자체와의 상호작용이 필요한 경우에는 팝오버를 사용하는 것이 적절하다.</p>
</section>
</section>
<section id="사용자-정의-테마" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="사용자-정의-테마"><span class="header-section-number">4.4</span> 사용자 정의 테마</h3>
<p><a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지의 또 다른 중요한 기능은 다양한 사용자 정의 테마(custom themeing)의 적용을 용이하게 한다는 점이다. <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a>는 Bootstrap 5를 기반으로 한 테마 시스템을 추상화하여, 사용자가 색상, 타이포그래피, 여백, 컴포넌트 스타일 등 핵심 디자인 요소를 일관된 방식으로 제어할 수 있도록 지원한다. 특히 <code>bs_theme()</code>를 중심으로 한 테마 정의 방식은 개별 UI 요소를 일일이 스타일링하는 접근에서 벗어나, 디자인 전반을 하나의 체계적인 설정으로 관리할 수 있게 해준다. 이를 통해 인터랙티브 대시보드나 웹 애플리케이션의 시각적 일관성을 유지하면서도, 목적과 사용자 맥락에 맞는 다양한 테마를 손쉽게 적용할 수 있다. 이러한 사용자 정의 테마 기능은 bslib를 단순한 UI 구성 도구를 넘어, 재현 가능하고 확장 가능한 시각적 설계 도구로 자리매김하게 하는 핵심 요소라 할 수 있다.</p>
<section id="bs_theme-함수" class="level4" data-number="4.4.1">
<h4 data-number="4.4.1" class="anchored" data-anchor-id="bs_theme-함수"><span class="header-section-number">4.4.1</span> <code>bs_theme()</code> 함수</h4>
<p><code>bs_theme()</code> 함수는 <a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지에서 사용자 정의 테마를 정의하는 핵심 함수로, Bootstrap 기반 UI의 시각적 전반을 하나의 설정 객체로 통합 관리한다. 즉, <code>bs_theme()</code> 함수는 색상, 글꼴, 여백, 컴포넌트 스타일 등 UI 전반의 디자인 규칙을 한 번에 정의하고 이를 Shiny 앱 전체에 일관되게 적요하도록 해주는 테마 객체 생성 함수이다.</p>
<p><code>bs_theme()</code> 함수의 주요 인수는 다음과 같다.</p>
<ul>
<li><p><code>version = 5</code>: 사용할 Bootstrap 버전으로 5가 기본값</p></li>
<li><p><code>bg = "#ffffff"</code>, <code>fg = "#212529"</code>: 기본 배경색 및 기본 텍스트 색상</p></li>
<li><p><code>primary = "#0d6efd"</code>, <code>secondary = ""</code>, <code>success = ""</code>, <code>info = ""</code>, <code>warning = ""</code>, <code>danger = ""</code>: Bootstrap의 의미 기반 색상 체계</p></li>
<li><p><code>base_font = font_google("Noto Sans KR")</code>, <code>heading_font = font_google("Noto Serif KR")</code>, <code>code_font = font_google("JetBrains Mono"</code>): 본문 텍스트, 제목, 코드 블록의 타이포그래피 일관성 확보</p></li>
<li><p><code>base_font_size = "1rem"</code>: 기본 글자 크기로 rem 단위 사용이 권장 된다.</p></li>
<li><p><code>spacer = "1rem"</code>: 여백의 기준 단위</p></li>
<li><p><code>border_radius = "0.5rem"</code>: 카드, 버튼 등의 모서리 둥글기</p></li>
<li><p><code>bootswatch = "flatly"</code>: 미리 정의된 Bootswatch 테마</p></li>
</ul>
</section>
<section id="테마-미리보기-및-검증" class="level4" data-number="4.4.2">
<h4 data-number="4.4.2" class="anchored" data-anchor-id="테마-미리보기-및-검증"><span class="header-section-number">4.4.2</span> 테마 미리보기 및 검증</h4>
<p><a href="https://rstudio.github.io/bslib/"><strong>bslib</strong></a> 패키지의 <code>bs_theme_preview()</code> 함수는 사용자 정의 테마를 실제 UI 구성 요소에 적용해 보며 시각적 효과를 즉시 확인할 수 있는 테마 미리보기 및 검증 도구이다.</p>
<p>콘솔에서 함수를 실행하면, 버튼, 카드, 입력 위젯 등 대표 UI 컴포넌트에 테마를 적용해볼 수 있고, 색상 대비, 타이포그래피, 여백 등을 한눈에 점검할 수 있을 뿐만 아니라, 테마 수정의 결과를 즉시 확인해 볼 수 있다. <a href="#fig-theming" class="quarto-xref">그림&nbsp;8</a> 에서 볼 수 있는 것처럼 오른편의 Theme customizer를 조작하여 이러한 기능을 활용해 볼 수 있다.</p>
<div id="fig-theming" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-theming-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/clipboard-4114941204.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="그림&nbsp;8: be_theme_update() 함수를 활용한 테마 미리보기 및 검증"><img src="images/clipboard-4114941204.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-theming-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;8: <code>be_theme_update()</code> 함수를 활용한 테마 미리보기 및 검증
</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="반응성-함수" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="반응성-함수"><span class="header-section-number">5</span> 반응성 함수</h2>
<section id="정의" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="정의"><span class="header-section-number">5.1</span> 정의</h3>
<p>Shiny의 반응성(reactivity)이란, 입력값의 변화에 따라 관련된 계산과 출력이 자동으로 재실행ㆍ갱신되는 메커니즘을 의미한다. 좀 더 기술적으로 표현하면 반응성은 입력(<code>input</code>)의 변화가 의존 관계(dependency)를 따라 전파되어, 반응형 표현식과 출력이 자동으로 갱신되는 실행 모델이다.</p>
<p><a href="#fig-reactive_flow" class="quarto-xref">그림&nbsp;9</a> 는 총체적인 Shiny의 반응성 플로(reactive flow)의 개념을 나타내고 있다.</p>
<div id="fig-reactive_flow" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-reactive_flow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/clipboard-2758836398.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" title="그림&nbsp;9: 반응성 플로 https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/reactive-flow.html"><img src="images/clipboard-2758836398.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-reactive_flow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9: 반응성 플로 <a href="https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/reactive-flow.html" style="font-size:1rem">https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/reactive-flow.html</a>
</figcaption>
</figure>
</div>
<p>Shiny 반응성 플로의 핵심 골자를 우선적으로 이해할 필요가 있고, <a href="#fig-reactive_flow_2" class="quarto-xref">그림&nbsp;10</a> 은 <a href="#fig-reactive_flow" class="quarto-xref">그림&nbsp;9</a> 의 가운데 부분만 따로 떼서 나타낸 것이다.</p>
<div id="fig-reactive_flow_2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-reactive_flow_2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/clipboard-2314936399.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="그림&nbsp;10: 단순화된 반응성 플로 https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/reactive-flow.html"><img src="images/clipboard-2314936399.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-reactive_flow_2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;10: 단순화된 반응성 플로 <a href="https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/reactive-flow.html" style="font-size:1rem">https://shiny.posit.co/r/getstarted/build-an-app/reactive-flow/reactive-flow.html</a>
</figcaption>
</figure>
</div>
<p>여기에서 보면, Shiny의 반응성 플로는 크게 세 부분, 즉 반응형 입력, 반응형 표현식, 반응형 출력으로 구분된다는 것을 알 수 있다. 사용자가 어떤 입력을 선택하면, 그 입력은 서버에서 특정 표현식(연산)을 거쳐 처리되고, 그 결과가 출력으로 렌더링된다. 사용자가 입력 값을 변경할 때마다, 출력을 생성하는 해당 표현식은 자동으로 다시 실행되며, 새로운 입력 값에 기반하여 관련 출력이 다시 렌더링된.</p>
<p>그런데, 이러한 반응성 플로의 각 단계는 특정한 반응성 함수에 의해 수행된다. 반응성 함수란 입력값에 대한 의존성을 추적하고 입력 변화 시 자동으로 재실행되는 함수를 말한다. 따라서 Shiny에서 반응성 함수는 공통적으로 다음의 특징을 갖는다.</p>
<ul>
<li><p><code>input$*</code>에 의존</p></li>
<li><p>입력이 바뀌면 자동으로 재실행</p></li>
<li><p>사용자가 직접 호출하지 않음</p></li>
<li><p>Shiny의 의존성 그래프(dependency graph)에 의해 관리됨</p></li>
</ul>
</section>
<section id="종류" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="종류"><span class="header-section-number">5.2</span> 종류</h3>
<p><a href="#fig-reactive_flow" class="quarto-xref">그림&nbsp;9</a> 를 보면, Shiny의 반응성 플로에서 다양한 반응성 함수가 사용되고 있음을 알 수 있다. 이러한 Shiny의 반응성 함수는 역할에 따라 크게 다음과 같은 여섯 부류로 나눌 수 있다.</p>
<ul>
<li><p>입력 함수: <code>*Input()</code> 계열</p></li>
<li><p>렌더링 함수: <code>render*()</code> 계열</p></li>
<li><p>반응형 표현식(reactive expression) 함수: 값을 계산(derive)해서 반환하는 ’계산 그래프 노드’로, <code>reactive({})</code>와 <code>eventReactive({})</code> 함수가 포함</p></li>
<li><p>반응형 관찰자(reactive observer) 함수: 값이 바뀔 때 ’부수 효과(side-effect)’를 수행하는 함수로 <code>observe({})</code>와 <code>observeEvent(,{})</code> 함수가 대표적</p></li>
<li><p>반응형 저장소(reactive store) 함수: 값 자체를 저장하고, 값이 바뀌면 반응적 업데이트를 촉잘하는 저장 장치로 <code>reactiveVal()</code> 와 <code>reactiveValues()</code> 함수가 대표적</p></li>
<li><p>반응형 유틸리티(reactive utility) 함수: 반응형 표현식 함수나 반응형 관찰자 함수 내부에서 특정 기능을 수행하는 보조 함수로 <code>req()</code>, <code>isolate()</code> 함수 등이 포함</p></li>
</ul>
<p>입력 함수와 렌더링 함수는 앞에서 이미 다루었으므로, 여기서는 나머지 세 종류의 함수에 집중하고자 한다.</p>
<section id="반응형-표현식-함수" class="level4" data-number="5.2.1">
<h4 data-number="5.2.1" class="anchored" data-anchor-id="반응형-표현식-함수"><span class="header-section-number">5.2.1</span> 반응형 표현식 함수</h4>
<p>반응형 표현식 함수란 다른 반응형 값에 의존하여 값을 계산하고 반환(return)하는 반응형 계산 단위이다. 이 표현식에 의존하는 값이 변경되면 자동으로 다시 계산된다. 반응형 표현식 함수에 다음의 두 가지가 있다.</p>
<ul>
<li><p><code>reactive({})</code>: 대표적인 일반 반응형 표현식 함수</p></li>
<li><p><code>eventReactive()</code>: 트리거가 존재할 때만 작동하는 반응형 표현식 함수</p></li>
</ul>
<p><code>reactive({})</code> 함수는 입력값에 따라 달라지는 계산 결과를 반응형 객체로 생성하는 함수이다. 입력을 받아 ’반응성 표현식(reactive expression)’을 생성한다. 여기서 반응성 표현식이란 단순히 최종 산출물(값이나 객체)만을 의미하는 것이 아니라, 그 산출물을 관리하는 메커니즘(종속성 추적, 지연 실행, 캐싱 등) 포함하는 동적인 객체를 의미한다. 따라서 반드시 함수 형태로 표기한다.</p>
<p>하나의 입력이 여러 개의 출력 함수(출력 생성 함수)와 결부되는 경우에 주로 사용되는데 동일한 입력의 중복 사용을 회피하기 위해 해당 입력을 반응성 표현식으로 전환하여 다수의 출력 생성 함수에 입력으로 투입할 수 있다. 일반 형식은 다음과 같다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 반응형 계산</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>출력이 아니라 중간 계산 결과를 생성하며, 반환값은 반응형 객체가 되고, 값에 접근할 때는 함수 형식으로 반드시 <code>()</code> 를 사용해야 한다. 다음의 예시를 살펴본다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>bins <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(x, <span class="at">breaks =</span> <span class="fu">bins</span>())</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>입력 함수를 통해 받은 <code>input$bins</code>를 읽어 <code>bins</code>라는 새로운 반응형 객체를 생성하고, 그것을 출력 생성 함수에서 투입하는 방식을 보여주고 있다. 반응형 객체는 반드시 <code>bins()</code>처럼 함수 형식으로 호출해야만 한다.</p>
<p>그런데, 여기서는 사실 <code>reactive({})</code> 함수가 반드시 필요한 것은 아니다. 즉, 다음과 같이 해도 아무런 문제가 없다. 그러나 출력 생성 함수가 여러 개 사용되고 거기에 bins가 여러 번 사용된다면 위와 같이 하는 것이 훨씬 효율적이다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(x, <span class="at">breaks =</span> bins)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>eventReactive(,{})</code> 함수는 지정한 이벤트가 발생할 때에만 갱신되는 반응형 표현식을 생성하는 함수이다. 표현식을 생성한다는 의미에서 <code>reactive({})</code> 함수와 동일하지만, 특정한 트리거에만 반응한다는 의미에서 다음에서 다룰 반응형 관찰자 함수(특히, <code>observeEvent(,{})</code> 함수)와도 밀접히 관련되어 있다.</p>
<p><code>reactive({})</code> 함수는 입력값이 바뀔 때마다 자동으로 계산되기 때문에, 예를 들어 슬라이더를 움직일 때마다 모델을 다시 돌린다거나, 입력창을 타이핑할 때마다 무거운 연산을 반복한다거나 하는 비효율적인 상황이 발생할 수 있다.</p>
<p><code>eventReactive(,{})</code> 함수는 이를 방지하기 위해 특정 이벤트가 발생할 때만 반응형 표현식을 갱신하고 그 외의 입력 변화는 무시하는 구조를 제공한다. <code>eventReactive(eventExpr, handlerExpr, ...)</code> 형태로 주어지는데, <code>eventExpr</code>에 트리거 역할을 하는 이벤트 표현식이 지정되는데, 주로 <code>input$button</code>, <code>input$go</code>, <code>input$file</code>처럼 값 자체보다 변경 이벤트 발생이 중요한 입력 요소로 사용된다. <code>handlerExpr</code>은 이벤트가 발생했을 때 실행되는 핸들러 표현식(계산식)이다. 아래에 예시가 있다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">eventReactive</span>(input<span class="sc">$</span>go, {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  input<span class="sc">$</span>x <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>여기에서 <code>input$go</code>가 <code>evenExpr</code>이고, <code>{input$x * 2}</code>가 handlerExpr이다. 입력 함수 <code>actionButton(inputID = "go", ...)</code>로부터 버튼을 누를 때 마다, 즉 <code>input$go</code> 이벤트가 발생할 때에만 <code>result()</code>를 재계산한다. <code>input$x</code>가 변한다고 자동적으로 갱신하지는 않는다.</p>
</section>
<section id="반응형-관찰자-함수" class="level4" data-number="5.2.2">
<h4 data-number="5.2.2" class="anchored" data-anchor-id="반응형-관찰자-함수"><span class="header-section-number">5.2.2</span> 반응형 관찰자 함수</h4>
<p>반응형 관찰자 함수는 반응형 값(<code>*Input()</code>, <code>reactive()</code>, <code>reactiveVal()</code>, <code>reactiveValues()</code> 등)의 변화가 발생했을 때 특정 동작(side effect)을 수행하는 반응형 구성 요소이다. 즉, 특정한 트리거에 반응(triggering reactions)하는 함수이다. 반응형 관찰자 함수는 값을 반환하지 않고, 대신 다음과 같은 동작을 행한다.</p>
<ul>
<li><p><code>update*Input()</code> 함수를 통해 UI 업데이트</p></li>
<li><p>로그 출력</p></li>
<li><p>파일 저장/데이터베이스 기록</p></li>
<li><p>알림 메시지 표시</p></li>
<li><p>내부 상태 갱신</p></li>
</ul>
<p>대표적인 함수에 <code>observe({})</code> 와 <code>observeEvent(,{})</code> 가 있다. <code>observe({})</code> 함수는 블록 내부에서 읽은 모든 반응성 입력값에 자동으로 의존하며, 의존성이 자동 추적되므로 가장 기본적인 함수이다. 아래의 예시에서 보면 사용자가 <code>input$region</code>을 바꿀 때마다 자동 실행된다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"현재 선택된 값:"</span>, input<span class="sc">$</span>region, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>observe({})</code> 함수가 특별한 트리거 설정 없이 반응성 요소 일반에 의존하는데 반해, <code>observeEvent(,{})</code> 함수는 “이벤트(트리거)”가 발생할 때만 실행되며, 함수에 지정한 값(보통 입력 위젯)만을 트리거로 사용한다. 내부에서 참조하는 다른 값들은 트리거로 작동하지 않는다. 대부분의 상황에서는 <code>observe({})</code> 함수 보다는 <code>observeEvent(,{})</code> 함수가 사용된다.</p>
<p><code>eventReactive(,{})</code> 함수와 마찬가지로 <code>observeEvent(eventExpr, handlerExpr,...)</code> 형태로 주어진다. <code>eventExpr</code> 인수는 이벤트 표현식을 지정하는데, 보통 <code>input$button</code>, <code>input$go</code>, <code>input$file</code>과 입력 함수가 설정된다. <code>handlerExpr</code>는 핸들러 표현식으로 이벤트가 발생했을 때 실행하는 부수효과 즉 ’활동’이 지정된다.</p>
<p><code>observeEvent(,{})</code> 함수는 특정 이벤트 발생 시에만 실행되고, 불필요한 재실행을 방지하기 위해 종속성 자동 추적을 하지 않는다. 따라서 버튼 클릭, 발짜 선택, 파일 업로드 등 이벤트 기반 작업에 매우 적합하다. 아래에 사례가 있다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>go, {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"버튼이 눌렸습니다</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"현재 선택된 값:"</span>, input<span class="sc">$</span>region, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>입력 함수 <code>actionButton(inputID = "go", ...)</code>로부터 버튼을 누를 때 마다 <code>"go"</code>라는 입력 요소의 값(<code>input$go</code>)이 1씩 증가하고, <code>input$go</code>값이 변할 때마다(즉, 버튼이 눌릴 때마다) Server에서 <code>{ }</code> 속의 내용을 실행한다. 위의 예시의 경우 버튼을 클리할 때마다 콘솔에 “버튼이 눌렸습니다”가 출력된다. 두 번째 줄은 슬라이더(<code>input$slider</code>) 값이 변해도 실행되지 않는데, 슬라이더 값은 읽지만 트리거가 아니기 때문이다.</p>
<p>좀 더 현실적인 예시를 제시하면 다음과 같다. 버튼 클릭시 계산을 실행하게 할 수 있다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>go, {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">heavy_calculation</span>()</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(result)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>UI 요소를 업데이트하게 할 수 있다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>go, {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">updateSliderInput</span>(session, <span class="st">"bins"</span>, <span class="at">value =</span> <span class="dv">20</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>파일을 저장하게 할 수 있다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>save, {</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(data, <span class="st">"result.csv"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>사실 <code>observeEvent()</code> 함수는 <code>observe()</code> 함수와 매우 유사하다. 아래는 동일하게 작동한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  input<span class="sc">$</span>go</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"버튼이 눌렸습니다</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>그러나 <code>observeEvent()</code>는 이벤트 중심이고, 의존성을 명확히 분리하며, 가독성과 안전성을 높이는 장점이 있다. 따라서 버튼 처리에는 <code>observeEvent()</code>가 권장된다.</p>
<p>마지막으로 <code>observeEvent()</code> 와 <code>eventReactive()</code>를 비교할 필요가 있다.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 38%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th>기능</th>
<th><code>observeEvent()</code></th>
<th><code>eventReactive()</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>반환값</td>
<td>없음</td>
<td>있음</td>
</tr>
<tr class="even">
<td>용도</td>
<td>행동(action), UI 업데이트</td>
<td>계산 결과 저장 및 반환</td>
</tr>
<tr class="odd">
<td>호출 방식</td>
<td>그냥 실행</td>
<td><code>result()</code>처럼 반응성 객체 호출</td>
</tr>
<tr class="even">
<td>내부 로직</td>
<td>사이드 이펙트 수행</td>
<td>이벤트 기반 계산식</td>
</tr>
</tbody>
</table>
</section>
<section id="반응형-저장소-함수" class="level4" data-number="5.2.3">
<h4 data-number="5.2.3" class="anchored" data-anchor-id="반응형-저장소-함수"><span class="header-section-number">5.2.3</span> 반응형 저장소 함수</h4>
<p>반응형 저장소 함수는 사용자가 직접 저장하고 갱신하는 값의 ’저장소’로,</p>
<p><code>reactiveVal()</code>와 <code>reactiveValues()</code>가 여기에 해당한다. 단독으로 사용되는 경우는 드물며, 보통 위에서 살펴본 반응형 관찰자 함수와 함께 사용된다.</p>
<p><code>reactiveVal()</code>은 하나의 스칼라 값을 저장하고 갱신하는 반응형 변수이다. 아래에 예시가 있다. <code>input$add</code> 버튼이 눌러질 때마다 <code>counter()</code>의 값이 1 증가한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>counter <span class="ot">&lt;-</span> <span class="fu">reactiveVal</span>(<span class="dv">0</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>add, {</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">counter</span>(<span class="fu">counter</span>() <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>reactiveValues()</code>는 여러 개의 반응형 값을 저장할 수 있는 일종의 반응형 리스트이다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>rv <span class="ot">&lt;-</span> <span class="fu">reactiveValues</span>(<span class="at">count =</span> <span class="dv">0</span>, <span class="at">msg =</span> <span class="st">"Hello"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>add, {</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  rv<span class="sc">$</span>count <span class="ot">&lt;-</span> rv<span class="sc">$</span>count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="반응형-유틸리티-함수" class="level4" data-number="5.2.4">
<h4 data-number="5.2.4" class="anchored" data-anchor-id="반응형-유틸리티-함수"><span class="header-section-number">5.2.4</span> 반응형 유틸리티 함수</h4>
<p>반응형 유틸리티 함수는 반응형 표현식 함수나 반응형 관찰자 함수 내부에서 반응성의 작동 방식을 제어하거나, 예외 처리(validation), 성승/흐름 제어(throttle/debounce), 종속성 무시(isolate), 요구 조건 검사(req) 등을 수행하는 보조 함수를 말한다. 이 함수들은 새로운 반응형 값을 생성하지 않고, 반응성을 보조하거나, 억제하거나, 예외를 조절하는 함수이다.</p>
<p>Shiny에서 실전적으로 가장 많이 사용되는 반응형 유틸리티 함수는 다음의 네 종류이다.</p>
<ul>
<li><p><code>isolate()</code>: 특정 값에 대한 반응성 추적을 일시적으로 끊기</p></li>
<li><p><code>req()</code>: 특정 조건 만족 시에만 반응식 실행(조건 미달 시 중단)</p></li>
<li><p><code>validate()</code>/<code>need()</code>: 사용자에게 친절한 메시지를 표시하며 반응식 실행 조건을 제어</p></li>
<li><p><code>debounce()</code>/<code>throttle()</code>: 빠르게 변하는 반응형 값의 업데이트 빈도를 제어(성능 최적화)</p></li>
<li><p><code>reactiveTimer()</code>: 시간 기반 무효화 신호를 보내는 함수</p></li>
<li><p><code>invalidateLater()</code>: 지정한 시간이 지난 후, 해당 함수가 포함된 반응식을 자동으로 무효화하여 다시 실행되도록 하는 함수</p></li>
<li><p><code>reactivePoll()</code>: 주기적으로 데이터가 바뀌었는지를 확인하고, 바뀐 경우에만 작동을 실행하는 함수</p></li>
<li><p><code>reactiveFileReader()</code>: 주기적으로 파일 변화를 감지하고, 파일이 바뀌면 읽어서 반응성 값으로 갱신하는 함스</p></li>
</ul>
<p><code>isolate()</code> 함수는 다른 반응형 함수 내에서 특정 표현식에 대한 의존성 추적을 비활성화한다. 즉, <code>isolate()</code> 안의 input/reactive 값을 읽어도 해당 값이 바뀌어도 재실행 트리거가 되지 않는다. 다음의 예제를 보자. 여기에서 <code>observe()</code>는 <code>input$run</code>에만 의존하고, <code>input$slider</code>는 <code>isolate()</code> 안에 있으므로, <code>slider</code> 값을 바꿔도 <code>observe()</code>는 재실행되지 않는다. 단, 실행될 때 <code>slider</code> 값을 읽을 수는 있다</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  input<span class="sc">$</span>run</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">isolate</span>({</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"현재 슬라이더 값:"</span>, input<span class="sc">$</span>slider, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>req()</code> 함수는 특정 조건이 만족하지 않으면 렌더링 함수, 반응형 표현식 함수, 반응형 관찰자 함수 블록의 실행을 중단한다. 조건이 충족될 때까지 아무것도 실행하지 않게 하는 보호 장치이다. 아래의 예에서 <code>input$number</code>가 비어 있거나 NULL이면 그 순간 랜더링 실행이 중단된다. 정상 숫자 입력이 있을 때만 아래 코드가 실행된다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>result <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req</span>(input<span class="sc">$</span>number)     </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="st">"값:"</span>, input<span class="sc">$</span>number)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>validate()</code> 함수와 <code>need()</code> 함수는 사용자에게 표시되는 유효성 검사 메시지(validation)을 제공한다. <code>validate()</code> 함수는 해당 메시지를 반응형 출력에 표시(렌더링 중단 포함)하고, <code>need()</code> 함수는 조건을 검사하여 메시지를 생성한다. 아래 예시를 살표보자. 조건을 만족하지 않으면 플롯 영역에 메시지(“x는 0보다 커야 합니다.”가 표시되고, 조건이 만족해야만 실제 플롯이 그려진다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">validate</span>(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">need</span>(input<span class="sc">$</span>x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"x는 0보다 커야 합니다."</span>),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">need</span>(<span class="sc">!</span><span class="fu">is.null</span>(input<span class="sc">$</span>y), <span class="st">"y 값을 입력하세요."</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span>input<span class="sc">$</span>x)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>debounce()</code> 함수와 <code>throttle()</code> 함수는 빠르게 변하는 반응형 값의 업데이트 빈도를 조절하여 성능을 최적화하는 함수이다. <code>debounce(x, millis)</code> 함수는 입력 변화가 멈춘 뒤 특정 시간(millis) 이후에 값을 전달한다. <code>throttle(x, millis)</code> 함수는 일정 주기(millis)마다 값을 업데이트한다. 아래의 예시를 살펴보자. 사용자가 검색창에 입력할 때마다 즉시 반응하는 것이 아니라 입력이 멈춘 후 0.5초 뒤에만 반응하다. API 조회, DB 질의 같은 무거운 연산에 매우 유용하다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>search_text <span class="ot">&lt;-</span> <span class="fu">debounce</span>(<span class="fu">reactive</span>(input<span class="sc">$</span>query), <span class="dv">500</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(<span class="fu">search_text</span>(), {</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"검색 실행:"</span>, <span class="fu">search_text</span>(), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>reactiveTimer()</code> 함수는 주어진 시간 간격마다 강제로 무효화 신호를 보내어, 해당 타이머를 사용하는 모든 반응식을 자동으로 다시 실행시킨다. 정해진 시간마다 반응식의 캐시를 무효화하고, 입력이 없어도 반응식을 정기적으로 실행시키는 역할을 한다. 즉, 사용자 입력 없이도 반응형 시스템을 움직이는 트리거 역할을 한다. 아래 코드는 1,000밀리초(1초)마다 타이머 신호를 보내 시간을 계속 갱신하여 보여주도록 한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>timer <span class="ot">&lt;-</span> <span class="fu">reactiveTimer</span>(<span class="dv">1000</span>)   </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">timer</span>()                      </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">Sys.time</span>())           </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>invalidateLater()</code> 함수는 특정 시간 후 반응식을 무효화시켜 다시 실행하게 만드는 시간 기반 트리거 유틸리티이다. 기본적으로 위의 <code>reactiveTimer()</code> 함수와 유사한 기능을 한다. 아래 역시 1,000밀리초(1초)마다 갱신된 시간을 계속 보여주도록 한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">invalidateLater</span>(<span class="dv">1000</span>)  </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">Sys.time</span>())</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>reactiveTimer()</code>는 여러 반응식에서 <code>timer()</code>를 호출할 수 있지만, <code>invalidateLater()</code> 함수는 오로지 반응식 내부에만 위치하며 각 반응식마다 개별적으로 설치할 필요가 있다. 하지만 설정의 유연성은 더 높다.</p>
<p><code>reactivePoll(intervalMillis, session, checkFunc, valueFunc)</code> 함수는 주기적으로 <code>checkFunc</code>를 실행하여 데이터 변화 유무를 확인하고, 변화한 경우 <code>valueFunc</code>를 실행하여 반응성 값으로 반환한다. 마지막으로 수정된 시간을 반환하는 <code>file.mtime()</code> 함수를 이용하여 1초마다 파일을 다시 읽어 들일 필요가 있는지를 검사한 후, 해당 파일의 다시 불러오기 여부를 결정한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">reactivePoll</span>(<span class="dv">1000</span>, session,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">function</span>() <span class="fu">file.mtime</span>(<span class="st">"data.csv"</span>),</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">function</span>() <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>reactiveFileReader(intervalMillis, session, filePath, readFunc)</code> 함수는 위의 작업을 좀 더 간단히 수행할 수 있게 도와준다. 1초마다 검토하고 <code>readFunc</code> 함수를 이용하여 <code>filePath</code>에 지정된 파일을 불러온다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">reactiveFileReader</span>(<span class="dv">1000</span>, session, <span class="st">"data.csv"</span>, read.csv)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
</section>
<section id="웹-앱의-공유" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="웹-앱의-공유"><span class="header-section-number">6</span> 웹 앱의 공유</h2>
<section id="웹-앱-배포deployment" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="웹-앱-배포deployment"><span class="header-section-number">6.1</span> 웹 앱 배포(deployment)</h3>
<p>웹 앱을 배포하는 데는 몇 가지 방법이 있지만 여기서는 <a href="https://www.shinyapps.io/">shinyapp.io</a>를 이용하는 방법에 대해 배운다.</p>
<p>첫째, 해당 홈페이지(<a href="https://www.shinyapps.io/" class="uri">https://www.shinyapps.io/</a>)에 접속한다.</p>
<p>둘째, 계정을 생성한다.</p>
<ul>
<li><p>로그인 후 상단 오른쪽 끝 메뉴 “Tokens” 페이지로 이동</p></li>
<li><p>페이지에서 Show를 통해 인증 토큰(Token)과 Secret 확보: Show secret를 클릭하여 secret까지 보이게 한 후 복사하기</p></li>
</ul>
<p>셋째, RStudio에 토큰을 설정한다. 단 한 번만 하면 된다.</p>
<ul>
<li>R 콘솔에 위에서 복사한 내용 붙여넣기 및 실행</li>
</ul>
<p>넷째, Publish 버튼 클릭</p>
<ul>
<li><p>스크립트 윈도우의 오른쪽 상단에 있는 Publish 버튼 클릭</p></li>
<li><p>배포를 원하는 R 파일만 선택</p></li>
</ul>
<p>다섯째, URL을 얻는다. 다음의 형식으로 생성된다.</p>
<ul>
<li>https://userid.shinyapps.io/project_name/</li>
</ul>
</section>
</section>
<section id="quarto와-shiny의-결합" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="quarto와-shiny의-결합"><span class="header-section-number">7</span> Quarto와 Shiny의 결합</h2>
<p>Quarto를 통해서 프로트엔드 웹 앱을 만들 수 있고, Shiny를 활용하면 서버-기반 웹 앱을 만들 수 있다. Quarto로 만들어진 웹 앱은 제작이 용이하고 가벼우며 호스팅 절차가 간단하다는 장점이 있지만 상호작용성을 고양하는데는 한계가 있다. Shiny로 만들어진 웹 앱은 높은 수준의 사용자 상호작용성을 보장하다는 확실한 장점이 있지만 제작이 상대적으로 어렵고 무거우며 호스팅 절차가 복잡하다는 단점이 있다.</p>
<p>따라서 많은 경우 두 가지의 장점을 결합하는 것이 도움이 된다. 특히 Shiny를 통해 구현되는 서버-기반 웹 앱의 요소가 많은 부분을 차지하는 웹 앱이 아니라면 Quarto 웹 앱을 기본으로 하고 거기에 Shiny 웹 앱의 요소를 부가하는 방식이 적절하다. 따라서 여기서는 Quarto 대시보드의 일부 영역에서 Shiny 사용하는 방법에 대해 다룬다.</p>
<p>여기에는 두 가지 접근이 있을 수 있다. 이것은 두 개의 결합으로 만들어지는 최종 웹 앱이 어떤 것이냐에 달려 있다. 즉, 최종적으로 Shiny 웹 앱이 만들어지면 Shiny 중심 방식이고, Quarto 웹 앱이 만들어지면 Quarto 중심 방식이라 부를 수 있다.</p>
<p>Shiny 중심 방식은 Quarto 대시보드 내에서 Quarto 문법으로 Shiny 웹 앱을 구축하는 것이다. 이렇게 하면 웹 앱 전체가 Shiny 웹 앱화 되며 따라서 shinyapps.io를 통해 배포해야만 한다. 이에 반해 Quarto 중심 방식은 Quarto 대시보드 속에 독립적으로 구축된 Shiny 웹 앱 임베딩하는 것으로 Quarto 웹 앱이 그대로 유지된다. 따라서 Quarto Pub을 통해 배포할 수 있다. 다음의 두 웹 앱을 비교할 수 있다.</p>
<ul>
<li><p>Shiny 중심 방식: <a href="https://sangillee.shinyapps.io/Dashboard_Example/" class="uri">https://sangillee.shinyapps.io/Dashboard_Example/</a></p></li>
<li><p>Quarto 중심 방식: <a href="https://sangillee.snu.ac.kr/dashboard_examples/" class="uri">https://sangillee.snu.ac.kr/dashboard_examples/</a></p></li>
</ul>
<section id="shiny-중심-방식" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="shiny-중심-방식"><span class="header-section-number">7.1</span> Shiny 중심 방식</h3>
<p>Shiny 중심 방식은 Quarto의 행렬 분할을 통한 레이아웃 설정 방식을 활용하여 입력 함수와 출력 함수를 포함하는 전략을 사용한다. 원 Shiny 패키지가 <code>fluidPage()</code>, <code>titlePanel()</code>, <code>sidebarLayout()</code>, <code>sidebarPanel()</code>, <code>mainPanel()</code>과 같은 UI 구조 함수를 사용하고, bslib 패키지가 <code>page_sidebar()</code>, <code>sidebar()</code>, <code>card()</code> 함수를 사용하는 것과 동일한 방식으로 Quarto의 레이아웃 함수를 활용하는 것이다. 중요한 것은 구조, 컨테이너, 레이아웃 속에 입력 함수와 출력 함수를 위치시키는 것이다.</p>
<p>이렇게 Quarto 대시보드 내에서 Shiny 웹 앱 구축하는 방법에 대해서는 다음의 내용을 참고할 수 있다.</p>
<ul>
<li><a href="https://quarto.org/docs/dashboards/interactivity/shiny-r.html" class="uri">https://quarto.org/docs/dashboards/interactivity/shiny-r.html</a></li>
</ul>
<p>위의 내용을 정리하면 다음과 같다.</p>
<p>첫째, YAML 헤더에 <code>server: shiny</code>를 첨가한다. 이것이 포함되는 순간 전체 웹 앱이 Shiny 웹 앱으로 바뀐다.</p>
<p>둘째, 사이드바와 메인 출력 영역으로 구성되는 UI 부분은 단일 row의 두 column 속에 배치한다.</p>
<ul>
<li><p>사이드바: 첫 번째 column 속에 <code>r</code> 코드 청크를 열고 그 속에 입력 함수를 위치 시킨다. 그리고 해당 column에 <code>{.sidebar}</code> CSS 클래스를 지정한다.</p></li>
<li><p>메인 출력 영역: 두 번째 column 속에 <code>r</code> 코드 청크를 열어 그 속에 출력 함수를 위치 시킨다.</p></li>
</ul>
<p>셋째, Server 부분은 row와 column에 관계 없이 <code>r</code> 코드 청크를 열고 그 속에 랜더 함수를 포함한 서버 내용을 위치시킨다. 그리고 청크 옵션으로 다음을 지정한다.</p>
<ul>
<li><code>#| context: server</code></li>
</ul>
<p>넷째, 기타(패키지, 데이터 등) 부분은 row와 column에 관계 없이 <code>r</code> 코드 청크를 열고 그 속에 내용을 위치시킨다. 그리고 청크 옵션으로 다음을 지정한다.</p>
<ul>
<li><p><code>#| context: setup</code></p></li>
<li><p><code>#| include: false</code></p></li>
</ul>
<p>앞의 예제는 아래와 같이 처리하면 유사한 형태의 웹 앱이 만들어진다. Quarto로 만든 다른 row와 column이 있을 경우 해당 웹 앱은 전체가 shiny 웹 앱화한다.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>title: "quarto-shiny-1"</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>format: dashboard</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>server: shiny</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>## shiny</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>### sidebar {.sidebar}</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>```{r}</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>sliderInput(inputId = "bins", </span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>            label = "Number of bins:",</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>            min = 1, max = 50, value = 30)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>### main</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>```{r}</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>#| context: setup</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>#| include: false</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>library(shiny)</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>library(tidyverse)</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>library(bslib)</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>library(plotly)</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>```{r}</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>plotlyOutput("distPlot")</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>```{r}</span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>#| context: server</span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>output$distPlot &lt;- renderPlotly({</span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>  x &lt;- faithful[, 2]</span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>  gg &lt;- ggplot() +</span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>    geom_histogram(</span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>      aes(x = x), bins = input$bins, fill = 'darkgray', color = 'white'</span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>    ) +</span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>    labs(</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>      x = 'Waiting time to next eruption (in mins)',</span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>      y = "Frequencies",</span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>      title = 'Histogram of waiting times'</span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a>  ggplotly(gg)</span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>```</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="quarto-중심-방식" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="quarto-중심-방식"><span class="header-section-number">7.2</span> Quarto 중심 방식</h3>
<p>외부에서 만들어진 Shiny 웹 앱을 임베딩한다. 만일 <a href="#fig-first" class="quarto-xref">그림&nbsp;3</a> 과 같은 전형적인 사이드바와 메일 콘텐츠 영역으로 이루어진 웹 앱이라면 Quarto 웹 앱의 한 row 속에 임베딩하면 된다. 아래의 <code>src=""</code> 부분에 Shiny 웹 앱의 URL을 넣으면 된다.</p>
<pre><code>&lt;iframe src="https://..." loading="lazy" style="width: 100%; height: 600px; border: 0px none;" allow="web-share; clipboard-write"&gt;&lt;/iframe&gt;</code></pre>
</section>
</section>
<section id="llm과-웹-앱의-결합" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="llm과-웹-앱의-결합"><span class="header-section-number">8</span> LLM과 웹 앱의 결합</h2>
<p>LLM을 웹 앱과 결합하는 다양한 방식에 대해 고민할 필요가 있다. LLM의 능력을 이용해 웹 앱의 내용 요소를 구성하는 것이 AI 기술과 웹 앱 기술을 접목하는 가장 좋은 방법이다.</p>
<section id="챗봇-만들기" class="level3" data-number="8.1">
<h3 data-number="8.1" class="anchored" data-anchor-id="챗봇-만들기"><span class="header-section-number">8.1</span> 챗봇 만들기</h3>
<p>LLM과 Shiny를 결합하여 챗봇을 만들어 본다. 이를 위해 <a href="https://ellmer.tidyverse.org/"><strong>ellmer</strong></a> 패키지와 <a href="https://posit-dev.github.io/shinychat/r/"><strong>shinychat</strong></a> 패키지를 활용한다. <a href="https://ellmer.tidyverse.org/"><strong>ellmer</strong></a> 패키지는 R 환경에서 LLM을 쉽고 직관적으로 호출하고 사용할 수 있도록 설계된 채팅 기반 인터페이스 패키지이다. 다양한 LLM과의 통합, 채팅 중심의 상호작용, 구조화된 데이터 추출, 도구 호출 및 함수 생성 등의 기능을 제공한다. <a href="https://posit-dev.github.io/shinychat/r/"><strong>shinychat</strong></a> 패키지는 Shiny 웹 앱 내에 현대적이고 세련된 채팅 인터페이스를 손쉽게 구축할 수 있도록 도와주는 패키지이다. 완성된 채팅 UI를 제공하며, 실시간 스트리밍 응답을 구현한다.</p>
<p>다음의 코드를 통해 ChatGPT를 활용한 챗봇을 구축할 수 있다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinychat)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ellmer)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">page_fillable</span>(</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">chat_ui</span>(</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="st">"chat"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">messages =</span> <span class="st">"your messages here"</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">fillable_mobile =</span> <span class="cn">TRUE</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  chat <span class="ot">&lt;-</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">chat_openai</span>(</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">base_url =</span> <span class="st">"https://api.openai.com/v1"</span>,</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">model =</span> <span class="st">"gpt-5.2"</span>,</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">api_key =</span> <span class="st">"your_api_key_here"</span>,</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">system_prompt =</span> <span class="st">""</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>chat_user_input, {</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>    stream <span class="ot">&lt;-</span> chat<span class="sc">$</span><span class="fu">stream_async</span>(input<span class="sc">$</span>chat_user_input)</span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">chat_append</span>(<span class="st">"chat"</span>, stream)</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>chat_ui()</code>와 <code>chat_append()</code> 함수가 <a href="https://posit-dev.github.io/shinychat/r/"><strong>shinychat</strong></a> 패키지 함수이다. <code>chat_ui()</code> 함수는 채팅창 인터페이스를 생성하는 함수이며, <code>chat_append()</code> 함수는 채팅창에 새로운 메시지를 추가하는 함수이다. <code>chat_openai()</code> 함수가 <a href="https://ellmer.tidyverse.org/"><strong>ellmer</strong></a> 패키지의 함수인데, R 세션과 OpenAI의 LLM 사이의 연결 통로를 생성하는 역할을 한다. LLM 모델과의 인터페이스 구축, 대화 맥락 유지, 시스템 프롬프트 설정, 다양한 응답 방식 지원 등의 기능을 한다.</p>
</section>
<section id="게시판-만들기" class="level3" data-number="8.2">
<h3 data-number="8.2" class="anchored" data-anchor-id="게시판-만들기"><span class="header-section-number">8.2</span> 게시판 만들기</h3>
<p>Shiny와 <a href="https://workspace.google.com/intl/ko/products/sheets/">구글 스프레드시트</a>를 결합하면 게시판을 구축할 수 있다. 이를 위해서 <a href="https://googlesheets4.tidyverse.org/"><strong>googlesheets4</strong></a> 패키지를 활용해야 한다. <a href="https://googlesheets4.tidyverse.org/"><strong>googlesheets4</strong></a>패키지는 Google Sheets API(v4)를 R과 연결해주는 라이브러리이다. R에서 구글 스프레드시트를 자유자재로 읽고, 쓰고, 수정할 수 있게 해주는 도구이다. 주요 기능은 다음과 같다.</p>
<p>첫째, 데이터 파이프라인 구축(연결 및 읽기) 기능을 제공한다. 단순한 파일 업로드를 넘어, R과 구글 시트를 실시간으로 동기화하는 통로 역할을 한다. 설문 조사 결과 모니터링, 실시간 업데이트되는 원본 데이터를 불러오는 등의 용도로 활용될 수 있다. 주요 함수는 다음과 같다.</p>
<ul>
<li><p><code>gs4_auth()</code>: 대화형 인증을 실행. 최초 1회 인중 후, 로컬 폴더에 저장된 캐시 토큰을 사용</p></li>
<li><p><code>gs4_deauth()</code>: 로그인이 필요없는 공개 시트의 경우, 복잡한 인증 절차 없이 바로 읽을 수 있음</p></li>
<li><p><code>read_sheet()</code>: URL이나 시트 ID만으로 데이터를 즉시 데이터 프레임 형태로 변환</p></li>
<li><p><code>range_rad()</code>: 특정 범위나 특정 워크시트만 선택적으로 로드</p></li>
</ul>
<p>둘째, 동적 결과 피드백(수정 및 쓰기) 기능을 제공한다. R에서 처리된 통계 모델 결과나 정제된 데이터를 다시 시트에 기록하여 협업 효율을 높인다. 분석 리포트 자동 업데이터, 팀원과 데이터 공유, 대시보드 데이터 공급 등의 용도로 활용될 수 있다. 주요 함수는 다음과 같다.</p>
<ul>
<li><p><code>sheet_write()</code>: 데이터를 시트에 덮어쓰거나 새로운 파일 생성</p></li>
<li><p><code>sheet_append()</code>: 기존 데이터 아래에 새로운 행을 추가</p></li>
<li><p><code>range_write()</code>: 시트 내의 특정 셀 위치에만 데이터를 정밀하게 기록</p></li>
</ul>
<p>셋째, 스프레드시트 구조 및 서식 관리 기능을 제공한다. 단순히 데이터만 주고받는 것이 아니라, 구글 시트 파일 자체를 R 코드로 제어한다. 주기적인 보고서 양식 생성, 불필요한 시트 정리, 데이터 정리 자동화 등의 용도로 활용될 수 있다. 주요 함수는 다음과 같다.</p>
<ul>
<li><p>시트 관리: <code>gs4_create()</code>(파일 생성), <code>sheet_add()</code>(탭 추가), <code>sheet_delete()</code>(탭 삭제)</p></li>
<li><p>메타데이터 제어: 파일 이름 변경, 시트 순서 변경 등 파일의 구조적 속성 관리</p></li>
</ul>
<p>다음의 코드로 게시판을 만들 수 있다. 일반적인 상황이라면 <code>gs4_auth()</code> 함수를 통해 1회 인증하면 그 다음부터 사용하지만 Shiny 서버에 이러한 정보가 함께 올라가는 것이 아니므로 <code>options()</code>를 통해 OAuth 토큰(인증 파일)을 저장하는 캐시 폴더( <code>.secrets</code>)를 지정한다. 서버 배포시 인증 파일을 함께 업로드함으로써 인증 파일을 프로젝트 내부에 고정한다. 또한 Google API 인증 시 사용할 기본 이메일 계정을 지정해 둔다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>sheet_url <span class="ot">&lt;-</span> <span class="st">"you sheet URL here"</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">gargle_oauth_cache =</span> <span class="st">".secrets"</span>,</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">gargle_oauth_email =</span> <span class="st">"your google email address"</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="fu">gs4_auth</span>()</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">page_fluid</span>(</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">navset_tab</span>(</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="st">"tabs"</span>,</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nav_panel</span>(</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">h6</span>(<span class="st">"글 목록"</span>), <span class="at">value =</span> <span class="st">"tab_1"</span>, <span class="fu">br</span>(),</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">DTOutput</span>(<span class="st">"table"</span>, <span class="at">width =</span> <span class="st">"100%"</span>)</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nav_panel</span>(</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">h6</span>(<span class="st">"글 작성"</span>),</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">value =</span> <span class="st">"tab_2"</span>, <span class="fu">br</span>(),</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">textInput</span>(<span class="st">"author"</span>, <span class="st">"작성자"</span>, <span class="at">width =</span> <span class="st">"100%"</span>),</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">textInput</span>(<span class="st">"title"</span>, <span class="st">"제목"</span>, <span class="at">width =</span> <span class="st">"100%"</span>),</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">textAreaInput</span>(<span class="st">"content"</span>, <span class="st">"내용"</span>, <span class="at">rows =</span> <span class="dv">8</span>, <span class="at">width =</span> <span class="st">"100%"</span>),</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"등록하기"</span>)</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nav_panel</span>(</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">h6</span>(<span class="st">"글 보기"</span>),</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">value =</span> <span class="st">"tab_3"</span>, </span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">br</span>(),</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">uiOutput</span>(<span class="st">"post_ui"</span>)</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>  posts <span class="ot">&lt;-</span> <span class="fu">reactiveVal</span>(<span class="cn">NULL</span>)</span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(sheet_url)</span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">posts</span>(df)</span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>table <span class="ot">&lt;-</span> <span class="fu">renderDT</span>({</span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">posts</span>()</span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(df)  </span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">datatable</span>(</span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>      df,</span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">selection =</span> <span class="st">"single"</span>,</span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>)</span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>submit, {</span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(sheet_url)</span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a>    new_id <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">nrow</span>(df) <span class="sc">==</span> <span class="dv">0</span>) <span class="dv">1</span> <span class="cf">else</span> <span class="fu">max</span>(df<span class="sc">$</span>번호, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a>    new_row <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a>      번호      <span class="ot">=</span> new_id,</span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a>      작성일    <span class="ot">=</span> <span class="fu">Sys.time</span>(),</span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a>      작성자  <span class="ot">=</span> input<span class="sc">$</span>author,</span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a>      제목  <span class="ot">=</span> input<span class="sc">$</span>title,</span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a>      내용 <span class="ot">=</span> input<span class="sc">$</span>content</span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sheet_append</span>(sheet_url, new_row)</span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showNotification</span>(<span class="st">"글이 등록되었습니다."</span>, <span class="at">type =</span> <span class="st">"message"</span>)</span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a>    df2 <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(sheet_url)</span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">posts</span>(df2)</span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateTextInput</span>(session, <span class="st">"작성자"</span>, <span class="at">value =</span> <span class="st">""</span>)</span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateTextInput</span>(session, <span class="st">"제목"</span>,  <span class="at">value =</span> <span class="st">""</span>)</span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateTextAreaInput</span>(session, <span class="st">"내용"</span>, <span class="at">value =</span> <span class="st">""</span>)</span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a>  current_id <span class="ot">&lt;-</span> <span class="fu">reactiveVal</span>(<span class="cn">NULL</span>)</span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>table_rows_selected, {</span>
<span id="cb37-74"><a href="#cb37-74" aria-hidden="true" tabindex="-1"></a>    row <span class="ot">&lt;-</span> input<span class="sc">$</span>table_rows_selected</span>
<span id="cb37-75"><a href="#cb37-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(<span class="fu">length</span>(row) <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb37-76"><a href="#cb37-76" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">posts</span>()</span>
<span id="cb37-77"><a href="#cb37-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(<span class="fu">nrow</span>(df) <span class="sc">&gt;=</span> row)</span>
<span id="cb37-78"><a href="#cb37-78" aria-hidden="true" tabindex="-1"></a>    this_post <span class="ot">&lt;-</span> df[row, ]</span>
<span id="cb37-79"><a href="#cb37-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">current_id</span>(this_post<span class="sc">$</span>번호)</span>
<span id="cb37-80"><a href="#cb37-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nav_select</span>(<span class="at">id =</span> <span class="st">"tabs"</span>, <span class="at">selected =</span> <span class="st">"tab_3"</span>) </span>
<span id="cb37-81"><a href="#cb37-81" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb37-82"><a href="#cb37-82" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>post_ui <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb37-83"><a href="#cb37-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(<span class="fu">current_id</span>())</span>
<span id="cb37-84"><a href="#cb37-84" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">posts</span>()</span>
<span id="cb37-85"><a href="#cb37-85" aria-hidden="true" tabindex="-1"></a>    post <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> <span class="fu">filter</span>(번호 <span class="sc">==</span> <span class="fu">current_id</span>())</span>
<span id="cb37-86"><a href="#cb37-86" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-87"><a href="#cb37-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">nrow</span>(post) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb37-88"><a href="#cb37-88" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="fu">p</span>(<span class="st">"선택된 글이 없습니다."</span>))</span>
<span id="cb37-89"><a href="#cb37-89" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-90"><a href="#cb37-90" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-91"><a href="#cb37-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tagList</span>(</span>
<span id="cb37-92"><a href="#cb37-92" aria-hidden="true" tabindex="-1"></a>      <span class="fu">h3</span>(post<span class="sc">$</span>제목),</span>
<span id="cb37-93"><a href="#cb37-93" aria-hidden="true" tabindex="-1"></a>      <span class="fu">p</span>(<span class="fu">strong</span>(<span class="st">"작성자: "</span>), post<span class="sc">$</span>작성자),</span>
<span id="cb37-94"><a href="#cb37-94" aria-hidden="true" tabindex="-1"></a>      <span class="fu">p</span>(<span class="fu">strong</span>(<span class="st">"작성일: "</span>), <span class="fu">as.character</span>(post<span class="sc">$</span>작성일)),</span>
<span id="cb37-95"><a href="#cb37-95" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb37-96"><a href="#cb37-96" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pre</span>(post<span class="sc">$</span>내용)  </span>
<span id="cb37-97"><a href="#cb37-97" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-98"><a href="#cb37-98" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb37-99"><a href="#cb37-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb37-100"><a href="#cb37-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">invalidateLater</span>(<span class="dv">30000</span>, session)</span>
<span id="cb37-101"><a href="#cb37-101" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb37-102"><a href="#cb37-102" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-103"><a href="#cb37-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-104"><a href="#cb37-104" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> 맨 위로</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "복사완료!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "복사완료!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, Sang-Il Lee</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/sangillee66/data_science/issues/new" class="toc-action"><i class="bi bi-github"></i>이슈 보고</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://sangillee.snu.ac.kr/">
      <i class="bi bi-house" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:si_lee@snu.ac.kr">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sangillee66">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>