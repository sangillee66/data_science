{
  "hash": "292862b90d56e3877e4366eedc480088",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: |\n  | [R Lecture 12]{style=\"color:coral;font-size:0.6em\"}\n  | [웹 앱 개발: Shiny 2]{style=\"font-size:1em\"} \nauthor: <br> 이상일(서울대학교 지리교육과 교수)\ndate: last-modified\nformat: \n  revealjs:\n    logo: snu_edu_1.png\n    footer: https://sangillee.snu.ac.kr/\n    transition: fade\n    transition-speed: fast\n    margin: 0.05\n    center: false\n    # smaller: false\n    # scrollable: false\n    code-link: true\n    code-line-numbers: false\n    code-copy: true\n    code-overflow: scroll\n    slide-number: true\n    width: 960 * 1.5\n    height: 700 * 1.5\n    lightbox: false\n    # min-scale: 1\n    # max-scale: 1\n    pointer:\n      pointerSize: 20\n      color: red\n    menu: true\n    embed-resources: false\n    theme: [default, custom_hq_pretendard_step.scss] # 슬라이드 본문 폰트 크기 조정\n    revealjs-plugins:\n      - pointer\n    css: styles.css\nexecute: \n  warning: false\n  error: false\n  freeze: auto  \ndpi: 600\neditor: visual\n# suppress-bibliography: true\neditor_options: \n  chunk_output_type: console\n---\n\n## 웹 배포(deployment)\n\n-   <https://www.shinyapps.io/>\n\n-   계정 생성\n\n    -   로그인 후 상단 오른쪽 끝 메뉴 \"Tokens\" 페이지로 이동\n\n    -   페이지에서 Show를 통해 인증 토큰(Token)과 Secret 확보: Show secret를 클릭하여 secret까지 보이게 한 후 복사하기\n\n-   RStudio에 토큰 설정\n\n    -   R 콘솔에 복사한 내용 붙여넣기 및 실행\n\n-   Publish 버튼 클릭\n\n    -   스크립트 윈도우의 오른쪽 상단\n\n    -   배포를 원하는 R 파일만 선택\n\n-   URL 생성: https://userid.shinyapps.io/project_name/\n\n    -   <https://sangillee.shinyapps.io/AIEDU2025_Example/>\n\n## Quarto와 Shiny의 결합\n\n-   상황: Quarto 대시보드의 일부 영역에서 Shiny 사용\n\n-   두 가지 접근\n\n    -   Shiny 중심 방식: Shiny 웹 앱의 생성\n\n        -   Quarto 대시보드 내에서 Quarto 문법으로 Shiny 웹 앱 구축\n\n        -   Quarto 대시보드 전체가 Shiny 웹 앱화: shinyapps.io를 통해 배포\n\n        -   사례: <https://sangillee.shinyapps.io/Dashboard_Example/>\n\n    -   Quarto 중심 방식: Quarto 대시보드의 유지\n\n        -   Quarto 대시보드 속에 독립적으로 구축된 Shiny 웹 앱 임베딩\n\n        -   여전히 Quarto 대시보드: Quarto Pub을 통해 배포\n\n        -   사례: <https://sangillee.snu.ac.kr/dashboard_examples/>\n\n## Quarto와 Shiny의 결합: Shiny 중심 방식\n\n-   옵션 1: Quarto를 Shiny 웹 앱의 레이아웃 설정 도구로 사용\n\n    -   **shiny** 패키지: `fluidPage()`\n\n        -   `titlePanel()`, `SidebarLayout()`, `sidebarPanel()`, `mainPanel()`\n\n    -   **bslib** 패키지: `page_sidebar()`\n\n        -   `sidebar = sidebar()`, `card()`\n\n-   옵션 2: Quarto 대시보드 내에서 Shiny 웹 앱 구축\n\n## Quarto와 Shiny의 결합: Shiny 중심 방식\n\n-   <https://quarto.org/docs/dashboards/interactivity/shiny-r.html>\n\n-   YAML 헤더에 다음 첨가: `server: shiny`\n\n-   ui 부분: 기본적으로는 `r` 코드 청크 속에 포함, 사이드바와 메인 병렬\n\n    -   사이드바: 레이아웃 구성요소에 넣고 `{.sidebar}` CSS 클래스 지정 가능\n\n    -   메인: 사이드바와 다른 레이아웃 구성요소에 넣기 가능\n\n-   server 부분: `r` 코드 청크 속에 포함, 다음 지정\n\n    -   `#| context: server` 지정\n\n-   기타(패키지, 데이터 등) 부분: `r` 코드 청크 속에 포함, 다음 지정\n\n    -   `#| context: setup`\n\n    -   `#| include: false`\n\n## Quarto와 Shiny의 결합: Quarto 중심 방식\n\n-   보통 하나의 row에 임베딩\n\n-   `src=\"\"` 부분만 교체\n\n```         \n<iframe src=\"https://...\" loading=\"lazy\" style=\"width: 100%; height: 600px; border: 0px none;\" allow=\"web-share; clipboard-write\"></iframe>\n```\n\n## Chatbot 웹 앱\n\n::: {layout-ncol=\"2\"}\n![[https://ellmer.tidyverse.org/](https://ellmer.tidyverse.org/){style=\"font-size:1.25rem\"}](images/hex_ellmer-02.png)\n\n![[https://posit-dev.github.io/shinychat/r/](https://posit-dev.github.io/shinychat/r/){style=\"font-size:1.25rem\"}](images/hex_shinychat-01.png)\n:::\n\n## Chatbot 웹 앱\n\n::: panel-tabset\n## 코드\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(shiny)\nlibrary(shinychat)\nlibrary(bslib)\nlibrary(ellmer)\n\nui <- page_fillable(\n  chat_ui(\n    id = \"chat\",\n    messages = \"your messages here\"\n  ),\n  fillable_mobile = TRUE\n)\n\nserver <- function(input, output, session) {\n  chat <-\n    chat_openai(\n      base_url = \"https://api.openai.com/v1\",\n      model = \"gpt-5.1\",\n      api_key = your_api_key_here,\n      system_prompt = \"\"\n    )\n\n  observeEvent(input$chat_user_input, {\n    stream <- chat$stream_async(input$chat_user_input)\n    chat_append(\"chat\", stream)\n  })\n}\n\nshinyApp(ui, server)\n```\n:::\n\n\n## 웹 앱\n\n<iframe src=\"https://sangillee.shinyapps.io/my_shinychat/\" loading=\"lazy\" style=\"width: 100%; height: 600px; border: 0px none;\" allow=\"web-share; clipboard-write\">\n\n</iframe>\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}